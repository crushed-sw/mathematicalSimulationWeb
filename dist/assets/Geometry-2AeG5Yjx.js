import{d as Dt,r as F,a as ue,o as D,c as re,t as Ot,_ as Ve,w as pe,b as oe,e as se,f as j,g as P,h as ve,n as ae,i as ne,F as ke,j as ge,u as q,k as $e,l as it,m as te,p as we,q as Qe,s as Ie,v as st,x as be,y as B,z as ye,A as jt}from"./index-n6R6eWql.js";import{s as tt,a as Kt}from"./splitterpanel.esm-MT15PScs.js";function Ce(M,i,e,c){return Math.sqrt(Math.pow(e-M,2)+Math.pow(c-i,2))}var Y=(M=>(M[M.None=0]="None",M[M.HelpPoint=1]="HelpPoint",M[M.Point=2]="Point",M[M.Line=3]="Line",M[M.LineSegment=4]="LineSegment",M[M.Circle=5]="Circle",M[M.CircleThreePoints=6]="CircleThreePoints",M[M.Ellipse=7]="Ellipse",M[M.EllipseFocus=8]="EllipseFocus",M[M.Hyperbola=9]="Hyperbola",M[M.HyperbolaFocus=10]="HyperbolaFocus",M[M.Parabola=11]="Parabola",M[M.ParabolaFocus=12]="ParabolaFocus",M[M.QuadraticBezier=13]="QuadraticBezier",M[M.CubicBezier=14]="CubicBezier",M[M.Rectangle=15]="Rectangle",M[M.Square=16]="Square",M[M.Polygon=17]="Polygon",M))(Y||{});const fe=Dt("geometryStore",()=>{const M=new Map,i=F({isRight:!1,state:0,clicked:[],ctrl:!1,drawing:!1,hover:{type:0,id:-1,x:0,y:0}});let e=1;const c=F([]),n=F([]),S=F([]),o=F([]),k=F([]),N=F([]),Q=F([]),K=F([]),V=F([]),O=F([]),g=F([]),x=F([]),r=F([]),a=F([]),v=F([]),E=F([]);function y(t){for(let s=0;s!==c.length;++s)if(c[s].index===t)return c[s]}function $(t){for(let s=0;s!==n.length;++s)if(n[s].index===t)return n[s]}function m(t){for(let s=0;s!==S.length;++s)if(S[s].index===t)return S[s]}function R(t){for(let s=0;s!==o.length;++s)if(o[s].index===t)return o[s]}function le(t){for(let s=0;s!==k.length;++s)if(k[s].index===t)return k[s]}function W(t){for(let s=0;s!==N.length;++s)if(N[s].index===t)return N[s]}function xe(t){for(let s=0;s!==Q.length;++s)if(Q[s].index===t)return Q[s]}function me(t){for(let s=0;s!==K.length;++s)if(K[s].index===t)return K[s]}function T(t){for(let s=0;s!==V.length;++s)if(V[s].index===t)return V[s]}function b(t){for(let s=0;s!==O.length;++s)if(O[s].index===t)return O[s]}function X(t){for(let s=0;s!==g.length;++s)if(g[s].index===t)return g[s]}function Pe(t){for(let s=0;s!==x.length;++s)if(x[s].index===t)return x[s]}function Se(t){for(let s=0;s!==r.length;++s)if(r[s].index===t)return r[s]}function de(t){for(let s=0;s!==a.length;++s)if(a[s].index===t)return a[s]}function Xe(t){for(let s=0;s!==v.length;++s)if(v[s].index===t)return v[s]}function Le(t){for(let s=0;s!==E.length;++s)if(E[s].index===t)return E[s]}function Me(t,s,h,p=-1){const d=y(h);d&&(d.x+=t,d.y+=s,d.roots.forEach(L=>{if(L.index!==p)switch(L.type){case 3:Ye(L.index);break;case 4:Fe(L.index);break;case 5:ze(L.index);break;case 6:He(L.index);break;case 7:Re(t,s,d.x,d.y,L.index,L.minType),Ge(L.index);break;case 8:qe(t,s,d.x,d.y,L.index,L.minType),Ne(L.index);break;case 9:Be(t,s,d.x,d.y,L.index,L.minType),z(L.index);break;case 10:C(t,s,d.x,d.y,L.index,L.minType),w(L.index);break;case 11:A(L.index);break;case 12:J(L.index);break;case 13:G(L.index);break;case 14:H(L.index);break;case 15:ie(t,s,d.x,d.y,L.index,L.minType),Ee(L.index);break;case 16:kt(t,s,d.x,d.y,L.index,L.minType),gt(L.index);break;case 17:xt(L.index);break}}))}function he(t,s,h){for(let p=0;p!==c.length;++p){const d=c[p];d.index===h&&(d.x+=t,d.y+=s)}}function Ye(t){const s=$(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=[d.x,d.y])})}}function Fe(t){const s=m(t);if(s){let h=0;s.leaves.forEach(f=>{const l=y(f);l&&(s.points[h++]=l.x,s.points[h++]=l.y)});const p=s.helps.length,d=(s.points[2]-s.points[0])/(p+1),L=(s.points[3]-s.points[1])/(p+1);for(let f=0;f<p;++f){const l=y(s.helps[f]);l&&(l.x=s.points[0]+(f+1)*d,l.y=s.points[1]+(f+1)*L)}s.helps.forEach(f=>{Me(0,0,f,t)})}}function ze(t){const s=R(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y):h===1&&(s.inX=d.x,s.inY=d.y,s.radius=Ce(s.x,s.y,s.inX,s.inY))),h++})}}function He(t){const s=le(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)})}}function Re(t,s,h,p,d,L){const f=W(d);if(f){if(L===0)if(t===0&&s===0){let l=0,u=h-f.prevX,I=p-f.prevY;f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0?he(t,s,u):(f.prevX=h,f.prevY=p),l++})}else if(L===1){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(_.y-p,_.x-h),0,0],u=[_.x,_.y];else if(l===2){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===3?(_.x=2*u[0]-h,_.y=2*u[1]-p):l===4&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}else if(L===2){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(p-_.y,h-_.x),0,0],u=[_.x,_.y];else if(l===1)_.x=2*u[0]-h,_.y=2*u[1]-p;else if(l===2){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===4&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}else if(L===3){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(p-_.y,h-_.x),0,0],u=[_.x,_.y];else if(l===1){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===3?(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]):l===4&&(_.x=2*u[0]-h,_.y=2*u[1]-p);l++})}else if(L===4){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(_.y-p,_.x-h),0,0],u=[_.x,_.y];else if(l===1){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===2?(_.x=2*u[0]-h,_.y=2*u[1]-p):l===3&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}}}function Ge(t){const s=W(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y,s.prevX=s.x,s.prevY=s.y):h===1?(s.rowX=d.x,s.rowY=d.y):h===2&&(s.colX=d.x,s.colY=d.y)),h++})}}function qe(t,s,h,p,d,L){const f=xe(d);if(f){if(L===0)if(t===0&&s===0){let l=0;const u=h-f.prevX,I=p-f.prevY;f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0?he(t,s,u):(f.prevX=h,f.prevY=p),l++})}else if(L===1){const l=y(f.leaves[0]),u=y(f.leaves[3]);u&&l&&(u.x=2*l.x-h,u.y=2*l.y-p)}else if(L===2){const l=y(f.leaves[0]),u=y(f.leaves[1]);u&&l&&(u.x=2*l.x-h,u.y=2*l.y-p)}}}function Ne(t){const s=xe(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y,s.prevX=s.x,s.prevY=s.y):h===1?(s.focusX=d.x,s.focusY=d.y):h===2&&(s.inX=d.x,s.inY=d.y)),h++})}}function Be(t,s,h,p,d,L){const f=me(d);if(f){if(L===0)if(t===0&&s===0){let l=0,u=h-f.prevX,I=p-f.prevY;f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0?he(t,s,u):(f.prevX=h,f.prevY=p),l++})}else if(L===1){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(_.y-p,_.x-h),0,0],u=[_.x,_.y];else if(l===2){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===3?(_.x=2*u[0]-h,_.y=2*u[1]-p):l===4&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}else if(L===2){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(p-_.y,h-_.x),0,0],u=[_.x,_.y];else if(l===1)_.x=2*u[0]-h,_.y=2*u[1]-p;else if(l===2){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===4&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}else if(L===3){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(p-_.y,h-_.x),0,0],u=[_.x,_.y];else if(l===1){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===3?(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]):l===4&&(_.x=2*u[0]-h,_.y=2*u[1]-p);l++})}else if(L===4){let l=0,u=[],I=[];f.leaves.forEach(U=>{const _=y(U);if(_)if(l===0)f.params=[0,0,0,Math.atan2(_.y-p,_.x-h),0,0],u=[_.x,_.y];else if(l===1){const ce=Ce(u[0],u[1],_.x,_.y);_.x=u[0]-ce*Math.sin(f.params[3]),_.y=u[1]+ce*Math.cos(f.params[3]),I=[_.x,_.y]}else l===2?(_.x=2*u[0]-h,_.y=2*u[1]-p):l===3&&(_.x=2*u[0]-I[0],_.y=2*u[1]-I[1]);l++})}}}function z(t){const s=me(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y,s.prevX=s.x,s.prevY=s.y):h===1?(s.rowX=d.x,s.rowY=d.y):h===2&&(s.colX=d.x,s.colY=d.y)),h++})}}function C(t,s,h,p,d,L){const f=T(d);if(f){if(L===0)if(t===0&&s===0){let l=0;const u=h-f.prevX,I=p-f.prevY;f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0?he(t,s,u):(f.prevX=h,f.prevY=p),l++})}else if(L===1){const l=y(f.leaves[0]),u=y(f.leaves[3]);u&&l&&(u.x=2*l.x-h,u.y=2*l.y-p)}else if(L===2){const l=y(f.leaves[0]),u=y(f.leaves[1]);u&&l&&(u.x=2*l.x-h,u.y=2*l.y-p)}}}function w(t){const s=T(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y,s.prevX=s.x,s.prevY=s.y):h===1?(s.focusX=d.x,s.focusY=d.y):h===2&&(s.inX=d.x,s.inY=d.y)),h++})}}function A(t){const s=b(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)})}}function J(t){const s=X(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(h===0?(s.x=d.x,s.y=d.y):h===1&&(s.focusX=d.x,s.focusY=d.y)),h++})}}function G(t){const s=Pe(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)})}}function H(t){const s=Se(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)})}}function ie(t,s,h,p,d,L){const f=de(d);if(f){if(L===7)if(t===0&&s===0){let l=0;const u=h-f.prev[0][0],I=p-f.prev[0][1];f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0&&he(t,s,u),l++}),f.prev[0][0]+=t,f.prev[0][1]+=s}else if(L===8){const l=y(f.leaves[0]),u=y(f.leaves[3]),I=y(f.leaves[2]);if(l&&u&&I){f.params=[0,0,0,Math.atan2(l.y-p,l.x-h),0,0];const U=Ce(l.x,l.y,u.x,u.y);u.x=l.x+U*Math.sin(f.params[3]),u.y=l.y-U*Math.cos(f.params[3]),I.x=u.x+(h-l.x),I.y=u.y+(p-l.y)}}else if(L===9){const l=y(f.leaves[0]),u=y(f.leaves[1]),I=y(f.leaves[2]);if(l&&u&&I){f.params=[0,0,0,Math.atan2(l.y-p,l.x-h),0,0];const U=Ce(l.x,l.y,u.x,u.y);u.x=l.x-U*Math.sin(f.params[3]),u.y=l.y+U*Math.cos(f.params[3]),I.x=h+(u.x-l.x),I.y=p+(u.y-l.y)}}else if(L===10){const l=y(f.leaves[0]),u=y(f.leaves[1]),I=y(f.leaves[3]);if(l&&u&&I){const U=l.y-u.y,_=u.x-l.x,ce=l.x*u.y-u.x*l.y,je=Math.atan2(l.y-u.y,l.x-u.x),Ke=Math.abs(U*h+_*p+ce)/Math.sqrt(Math.pow(U,2)+Math.pow(_,2)),Ue=l.y-I.y,Je=I.x-l.x,Tt=l.x*I.y-I.x*l.y,Ze=Math.atan2(l.y-I.y,l.x-I.x),et=Math.abs(Ue*h+Je*p+Tt)/Math.sqrt(Math.pow(Ue,2)+Math.pow(Je,2));u.x=l.x-et*Math.sin(Ze),u.y=l.y+et*Math.cos(Ze),I.x=l.x+Ke*Math.sin(je),I.y=l.y-Ke*Math.cos(je)}}}}function Ee(t){const s=de(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)}),s.prev=[[s.points[0],s.points[1]]]}}function kt(t,s,h,p,d,L){const f=Xe(d);if(f){if(L===7)if(t===0&&s===0){let l=0;const u=h-f.prev[0][0],I=p-f.prev[0][1];f.leaves.forEach(U=>{l!==0&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==0&&he(t,s,u),l++}),f.prev[0][0]+=t,f.prev[0][1]+=s,f.prev[1][0]+=t,f.prev[1][1]+=s}else if(L===8){const l=y(f.leaves[0]),u=y(f.leaves[3]),I=y(f.leaves[2]);if(l&&u&&I){f.params=[0,0,0,Math.atan2(l.y-p,l.x-h),0,0];const U=Ce(l.x,l.y,h,p);u.x=l.x+U*Math.sin(f.params[3]),u.y=l.y-U*Math.cos(f.params[3]),I.x=u.x+(h-l.x),I.y=u.y+(p-l.y)}}else if(L===9){const l=y(f.leaves[0]),u=y(f.leaves[1]),I=y(f.leaves[2]);if(l&&u&&I){f.params=[0,0,0,Math.atan2(l.y-p,l.x-h),0,0];const U=Ce(l.x,l.y,h,p);u.x=l.x-U*Math.sin(f.params[3]),u.y=l.y+U*Math.cos(f.params[3]),I.x=h+(u.x-l.x),I.y=p+(u.y-l.y)}}else if(L===10)if(t===0&&s===0){let l=0;const u=h-f.prev[1][0],I=p-f.prev[1][1];f.leaves.forEach(U=>{l!==2&&he(u,I,U),l++})}else{let l=0;f.leaves.forEach(u=>{l!==2&&he(t,s,u),l++}),f.prev[0][0]+=t,f.prev[0][1]+=s,f.prev[1][0]+=t,f.prev[1][1]+=s}}}function gt(t){const s=Xe(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=d.x,s.points[h++]=d.y)}),s.prev=[[s.points[0],s.points[1]],[s.points[4],s.points[5]]]}}function xt(t){const s=Le(t);if(s){let h=0;s.leaves.forEach(p=>{const d=y(p);d&&(s.points[h++]=[d.x,d.y])})}}const yt={radius:3,fill:"rgba(255, 50, 0, 1)",strokeWidth:1,maskWidth:2,mask:"rgba(255, 50, 0, 1)",visible:!0,choosable:!1};function ee(t,s,h,p,d,L,f=""){if(i.clicked=[],d>0)return c.forEach(l=>{l.index===d&&l.roots.push({index:h,type:p,minType:L,attr:f})}),d;{const l=e;M.set(e,2);const u={x:t,y:s,...yt};return u.index=e++,u.callBack=(I,U)=>Me(I,U,u.index),u.roots=[{index:h,type:p,minType:L,attr:f}],c.push(u),l}}function mt(t){t.leaves[0]>0||(i.clicked=[],M.set(e,2),t.index=e++,t.roots=[],t.callBack=(s,h)=>Me(s,h,t.index),c.push(t))}function Mt(t){i.clicked=[],M.set(e,3),t.index=e++;const s=[],h=[];let p=0;t.points.forEach(d=>{s.push(ee(d[0],d[1],t.index,3,t.leaves[p],6)),h.push([d[0],d[1]]),p++}),t.points=h,t.leaves=s,n.push(t)}function wt(t){i.clicked=[],M.set(e,4),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,4,t.leaves[0],2),h=ee(t.points[2],t.points[3],t.index,4,t.leaves[1],1);t.leaves=[s,h],t.helps=[],S.push(t)}function _t(t){i.clicked=[],M.set(e,5),t.index=e++;const s=ee(t.x,t.y,t.index,5,t.leaves[0],0),h=ee(t.inX,t.inY,t.index,5,t.leaves[1],6);t.leaves=[s,h],o.push(t)}function Wt(t){i.clicked=[],M.set(e,6),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,6,t.leaves[0],6,"1"),h=ee(t.points[2],t.points[3],t.index,6,t.leaves[1],6,"2"),p=ee(t.points[4],t.points[5],t.index,6,t.leaves[2],6,"3");t.leaves=[s,h,p],k.push(t)}function Ct(t){i.clicked=[],M.set(e,7),t.index=e++;const s=ee(t.x,t.y,t.index,7,t.leaves[0],0),h=ee(t.rowX,t.rowY,t.index,7,t.leaves[1],1),p=ee(t.colX,t.colY,t.index,7,t.leaves[2],3),d=ee(2*t.x-t.rowX,2*t.y-t.rowY,t.index,7,-1,2),L=ee(2*t.x-t.colX,2*t.y-t.colY,t.index,7,-1,4);t.prevX=t.x,t.prevY=t.y,t.leaves=[s,h,p,d,L],N.push(t)}function Pt(t){i.clicked=[],M.set(e,8),t.index=e++;const s=ee(t.x,t.y,t.index,8,t.leaves[0],0),h=ee(t.focusX,t.focusY,t.index,8,t.leaves[1],1),p=ee(t.inX,t.inY,t.index,8,t.leaves[2],6),d=ee(2*t.x-t.focusX,2*t.y-t.focusY,t.index,8,-1,2);t.prevX=t.x,t.prevY=t.y,t.leaves=[s,h,p,d],Q.push(t)}function St(t){i.clicked=[],M.set(e,9),t.index=e++;const s=ee(t.x,t.y,t.index,9,t.leaves[0],0),h=ee(t.rowX,t.rowY,t.index,9,t.leaves[1],1),p=ee(t.colX,t.colY,t.index,9,t.leaves[2],3),d=ee(2*t.x-t.rowX,2*t.y-t.rowY,t.index,9,-1,2),L=ee(2*t.x-t.colX,2*t.y-t.colY,t.index,9,-1,4);t.prevX=t.x,t.prevY=t.y,t.leaves=[s,h,p,d,L],K.push(t)}function Xt(t){i.clicked=[],M.set(e,10),t.index=e++;const s=ee(t.x,t.y,t.index,10,t.leaves[0],0),h=ee(t.focusX,t.focusY,t.index,10,t.leaves[1],1),p=ee(t.inX,t.inY,t.index,10,t.leaves[2],6),d=ee(2*t.x-t.focusX,2*t.y-t.focusY,t.index,10,-1,2);t.prevX=t.x,t.prevY=t.y,t.leaves=[s,h,p,d],V.push(t)}function Yt(t){i.clicked=[],M.set(e,11),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,11,t.leaves[0],6),h=ee(t.points[2],t.points[3],t.index,11,t.leaves[1],6),p=ee(t.points[4],t.points[5],t.index,11,t.leaves[2],6);t.leaves=[s,h,p],O.push(t)}function Et(t){i.clicked=[],M.set(e,12),t.index=e++;const s=ee(t.x,t.y,t.index,12,t.leaves[0],6),h=ee(t.focusX,t.focusY,t.index,12,t.leaves[1],0);t.leaves=[s,h],g.push(t)}function $t(t){i.clicked=[],M.set(e,13),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,13,t.leaves[0],6),h=ee(t.points[2],t.points[3],t.index,13,t.leaves[1],6),p=ee(t.points[4],t.points[5],t.index,13,t.leaves[2],6);t.leaves=[s,h,p],x.push(t)}function Lt(t){i.clicked=[],M.set(e,14),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,14,t.leaves[0],6),h=ee(t.points[2],t.points[3],t.index,14,t.leaves[1],6),p=ee(t.points[4],t.points[5],t.index,14,t.leaves[2],6),d=ee(t.points[6],t.points[7],t.index,14,t.leaves[3],6);t.leaves=[s,h,p,d],r.push(t)}function qt(t){i.clicked=[],M.set(e,15),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,15,t.leaves[0],7),h=ee(t.points[2],t.points[3],t.index,15,t.leaves[1],8),p=ee(t.points[4],t.points[5],t.index,15,t.leaves[2],10),d=ee(t.points[4]+(t.points[0]-t.points[2]),t.points[5]+(t.points[1]-t.points[3]),t.index,15,-1,9);t.prev=[[t.points[0],t.points[1]]],t.leaves=[s,h,p,d],a.push(t)}function Nt(t){i.clicked=[],M.set(e,16),t.index=e++;const s=ee(t.points[0],t.points[1],t.index,16,t.leaves[0],7),h=ee(t.points[2],t.points[3],t.index,16,t.leaves[1],8),p=ee(t.points[4],t.points[5],t.index,16,-1,10),d=ee(t.points[4]+(t.points[0]-t.points[2]),t.points[5]+(t.points[1]-t.points[3]),t.index,16,-1,9);t.prev=[[t.points[0],t.points[1]],[t.points[4],t.points[5]]],t.leaves=[s,h,p,d],v.push(t)}function Bt(t){i.clicked=[],M.set(e,17),t.index=e++;const s=[];let h=0;const p=[];t.points.forEach(d=>{s.push(ee(d[0],d[1],t.index,17,t.leaves[h],6)),p.push([d[0],d[1]]),h++}),t.points=p,t.leaves=s,E.push(t)}function It(t,s){const h=M.get(t);if(h&&h!==4)return;const p=m(t);if(p&&(p.helps||(p.helps=[]),p.helps.forEach(d=>{Ae(d,t)}),p.helps=[],s!==0)){const d=(p.points[2]-p.points[0])/(s+1),L=(p.points[3]-p.points[1])/(s+1);for(let f=1;f<=s;++f)p.helps.push(ee(p.points[0]+f*d,p.points[1]+f*L,p.index,4,-1,6))}}function Ft(t,s,h){const p=M.get(t),d=M.get(s);if(p!==2||d!==2)return;const L=y(t),f=y(s);if(L&&f){const l=Math.atan2(f.y-L.y,f.x-L.x);f.x=L.x+h*Math.cos(l),f.y=L.y+h*Math.sin(l),Me(0,0,f.index)}}function zt(t,s){if(M.get(t)!==4)return;const p=m(t);if(p){const d=y(p.leaves[0]),L=y(p.leaves[1]);if(d&&L){const f=Math.atan2(L.y-d.y,L.x-d.x);L.x=d.x+s*Math.cos(f),L.y=d.y+s*Math.sin(f),Me(0,0,L.index)}}}function Ht(t,s,h,p){const d=M.get(t),L=M.get(s),f=M.get(h);if(d!==2||L!==2||f!==2)return;const l=y(t),u=y(s),I=y(h);if(l&&u&&I){const U=Math.atan2(l.y-u.y,l.x-u.x),_=p*Math.PI/180,ce=Ce(u.x,u.y,I.x,I.y);I.x=u.x+ce*Math.cos(U-_),I.y=u.y+ce*Math.sin(U-_),Me(0,0,I.index)}}function Rt(t,s,h){const p=M.get(t),d=M.get(s);if(p!==4||d!==4)return;const L=m(t),f=m(s);if(L&&f){const l=Math.atan2(L.points[3]-L.points[1],L.points[2]-L.points[0]),u=h*Math.PI/180,I=Ce(f.points[0],f.points[1],f.points[2],f.points[3]),U=y(f.leaves[1]);U&&(U.x=f.points[0]+I*Math.cos(l-u),U.y=f.points[1]+I*Math.sin(l-u),Me(0,0,U.index))}}function Gt(t,s,h){h===4?zt(t[0],s):Ft(t[0],t[1],s)}function At(t,s,h){h===4?Rt(t[0],t[1],s):Ht(t[0],t[1],t[2],s)}function Vt(t){const s=y(t);if(s){const h=s.roots,p=c.findIndex(d=>d.index===t);p!==-1&&c.splice(p,1),h.forEach(d=>{Oe(d.index,d.type)})}}function Ae(t,s){const h=y(t);if(h){if(h.roots.length<1){const p=c.findIndex(d=>d.index===t);p!==-1&&c.splice(p,1)}else if(h.roots.length===1){if(h.roots[0].index===s){const p=c.findIndex(d=>d.index===t);p!==-1&&c.splice(p,1)}}else if(h.roots.length>1){const p=h.roots.findIndex(d=>d.index===s);p!==-1&&h.roots.splice(p,1)}}}function We(t,s,h){const p=t(h);if(p){const d=p.leaves;let L=[];p.helps&&(L=p.helps);const f=s.findIndex(l=>l.index===h);f!==-1&&s.splice(f,1),d.forEach(l=>{Ae(l,h)}),L.forEach(l=>{Ae(l,h)})}}function Oe(t,s){switch(s){case 2:Vt(t);break;case 3:We($,n,t);break;case 4:We(m,S,t);break;case 5:We(R,o,t);break;case 6:We(le,k,t);break;case 7:We(W,N,t);break;case 8:We(xe,Q,t);break;case 9:We(me,K,t);break;case 10:We(T,V,t);break;case 11:We(b,O,t);break;case 12:We(X,g,t);break;case 13:We(Pe,x,t);break;case 14:We(Se,r,t);break;case 15:We(de,a,t);break;case 16:We(Xe,v,t);break;case 17:We(Le,E,t);break}}function Qt(t){i.clicked=[],i.hover.id=-1,i.hover.type=0;const s=M.get(t);s!==void 0&&Oe(t,s)}return{allShapes:M,global:i,pointList:c,lineList:n,lineSegmentsList:S,circleList:o,circleThreePointsList:k,ellipseList:N,ellipseFocusList:Q,hyperbolaList:K,hyperbolaFocusList:V,parabolaList:O,parabolaFocusList:g,quadraticBezierList:x,cubicBezierList:r,rectangleList:a,squareList:v,polygonList:E,addPoint:mt,addLine:Mt,addLineSegments:wt,addCircle:_t,addCircleThreePoints:Wt,addEllipse:Ct,addEllipseFocus:Pt,addHyperbola:St,addHyperbolaFocus:Xt,addParabola:Yt,addParabolaFocus:Et,addQuadraticBezier:$t,addCubicBezier:Lt,addRectangle:qt,addSquare:Nt,addPolygon:Bt,changeHelper:It,changeLength:Gt,changeAngle:At,getPoint:y,deleteShape:Qt}}),Ut={key:0,class:"absolute w-auto h-auto bottom-0 right-0 state-div p-2"},Jt=ue({__name:"ShowState",props:{stateValue:{type:String,required:!0}},setup(M){const i=M;return(e,c)=>(D(),re("div",Ut,Ot(i.stateValue),1))}}),Zt=Ve(Jt,[["__scopeId","data-v-66650c9f"]]),_e={index:{type:Number,default:0},isMask:{type:Boolean,default:!1},customId:{type:Number,default:-1},isChecked:{type:Boolean,default:!1},dash:{type:Array,default:[]},draggable:{type:Boolean,default:!1},fill:{type:String,default:"black"},mask:{type:String,default:"red"},maskWidth:{type:Number,default:2},stroke:{type:String,default:"black"},strokeWidth:{type:Number,default:2},hitStrokeWidth:{type:Number,default:6},shadowColor:{type:String,default:""},shadowOffset:{type:Object,default:{}},shadowBlur:{type:Number,default:0},shadowOpacity:{type:Number,default:1},visible:{type:Boolean,default:!0},scale:{type:Object,default:{}},scaleX:{type:Number,default:1},scaleY:{type:Number,default:1},rotation:{type:Number,default:0},offset:{type:Object,default:{}},offsetX:{type:Number,default:0},offsetY:{type:Number,default:0}},Z=ue({__name:"Point",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},radius:{type:Number,default:4},isHelp:{type:Boolean,default:!1},..._e},setup(M){const i=fe(),e=M,c=F({index:e.index,x:e.x,y:e.y,draggable:e.draggable,rotation:e.rotation,isChecked:e.isChecked,visible:e.visible,choosable:e.choosable}),n=F({radius:e.radius+e.maskWidth,stroke:e.mask,strokeWidth:e.maskWidth,visible:!1}),S=F({radius:e.radius,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,hitStrokeWidth:e.hitStrokeWidth});function o(){c.index=e.index,c.x=e.x,c.y=e.y,c.draggable=e.draggable,c.rotation=e.rotation,c.isChecked=e.isChecked,c.visible=e.visible,c.choosable=e.choosable}function k(){n.radius=e.radius+e.maskWidth,n.stroke=e.mask,n.strokeWidth=e.maskWidth,n.visible=e.isMask}function N(){S.radius=e.radius,S.stroke=e.stroke,S.strokeWidth=e.strokeWidth,S.fill=e.fill,S.hitStrokeWidth=e.hitStrokeWidth}pe(()=>e,()=>{o(),k(),N()},{deep:!0});function Q(){e.index>0&&(e.isHelp?(i.global.hover.id=e.index,i.global.hover.type=Y.HelpPoint):(i.global.hover.id=e.index,i.global.hover.type=Y.Point),i.global.hover.x=e.x,i.global.hover.y=e.y),i.global.drawing&&(i.global.clicked=[e.index])}function K(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function V(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(O,g)=>{const x=oe("v-circle"),r=oe("v-group");return D(),se(r,{ref:"pointerGroup",config:c,onMouseenter:Q,onMouseout:K,onClick:V},{default:j(()=>[P(x,{config:n},null,8,["config"]),P(x,{config:S},null,8,["config"]),ve(O.$slots,"default")]),_:3},8,["config"])}}}),ot=ue({__name:"Line",props:{points:{type:Array,required:!0,validator(M){return M.length>0}},..._e},setup(M){const i=fe(),e=M,c=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,visible:e.visible,choosable:e.choosable}),n=F({points:e.points.flat(),stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,dash:e.dash,visible:!1}),S=F({fill:"rgba(0, 0, 0, 1)",points:e.points.flat(),stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,dash:e.dash});function o(){c.index=e.index,c.draggable=e.draggable,c.rotation=e.rotation,c.visible=e.visible,c.choosable=e.choosable}function k(){n.points=e.points.flat(),n.stroke=e.mask,n.strokeWidth=e.strokeWidth+e.maskWidth*2,n.dash=e.dash,n.visible=e.isMask}function N(){S.points=e.points.flat(),S.stroke=e.stroke,S.strokeWidth=e.strokeWidth,S.hitStrokeWidth=e.hitStrokeWidth,S.dash=e.dash}pe(()=>e,()=>{o(),k(),N()},{deep:!0});function Q(g){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Line),i.global.drawing&&(i.global.clicked=[e.index])}function K(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function V(g){}function O(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(g,x)=>{const r=oe("v-line"),a=oe("v-group");return D(),se(a,{ref:"lineGroup",config:c,onMouseenter:Q,onMouseout:K,onMousemove:V,onClick:O},{default:j(()=>[P(r,{config:n},null,8,["config"]),P(r,{config:S},null,8,["config"]),ve(g.$slots,"default")]),_:3},8,["config"])}}}),lt=ue({__name:"LineSegment",props:{points:{type:Array,required:!0,validator(M){return M.length===4}},..._e},setup(M){const i=fe(),e=M,c=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,visible:e.visible,choosable:e.choosable}),n=F({points:e.points,stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,dash:e.dash,visible:!1}),S=F({points:e.points,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,dash:e.dash});function o(){c.index=e.index,c.draggable=e.draggable,c.rotation=e.rotation,c.visible=e.visible,c.choosable=e.choosable}function k(){n.points=e.points,n.stroke=e.mask,n.strokeWidth=e.strokeWidth+e.maskWidth*2,n.dash=e.dash,n.visible=e.isMask}function N(){S.points=e.points,S.stroke=e.stroke,S.strokeWidth=e.strokeWidth,S.hitStrokeWidth=e.hitStrokeWidth,S.dash=e.dash}pe(()=>e,()=>{o(),k(),N()},{deep:!0});function Q(g){if(e.index>0){i.global.hover.id=e.index,i.global.hover.type=Y.LineSegment;const x=e.points[0],r=e.points[1],a=e.points[2],v=e.points[3],E=g.evt.layerX,y=g.evt.layerY,$=Math.atan2(r-v,x-a),m=Math.PI/4;if($>=-m&&$<=m||$<-3*m||$>3*m){const R=(v-r)/(a-x)*(E-x)+r;i.global.hover.x=E,i.global.hover.y=R}else{const R=(a-x)/(v-r)*(y-r)+x;i.global.hover.x=R,i.global.hover.y=y}}i.global.drawing&&(i.global.clicked=[e.index])}function K(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function V(g){if(i.global.hover.id===e.index){const x=e.points[0],r=e.points[1],a=e.points[2],v=e.points[3],E=g.evt.layerX,y=g.evt.layerY,$=Math.atan2(r-v,x-a),m=Math.PI/4;if($>=-m&&$<=m||$<-3*m||$>3*m){const R=(v-r)/(a-x)*(E-x)+r;i.global.hover.x=E,i.global.hover.y=R}else{const R=(a-x)/(v-r)*(y-r)+x;i.global.hover.x=R,i.global.hover.y=y}}}function O(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(g,x)=>{const r=oe("v-line"),a=oe("v-group");return D(),se(a,{ref:"lineSegmentGroup",config:c,onMouseenter:Q,onMouseout:K,onMousemove:V,onClick:O},{default:j(()=>[P(r,{config:n},null,8,["config"]),P(r,{config:S},null,8,["config"]),ve(g.$slots,"default")]),_:3},8,["config"])}}}),at=ue({__name:"Circle",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},radius:{type:Number,required:!0},..._e},setup(M){const i=fe(),e=M,c=(x,r)=>{const a=Math.abs(r.radius()-e.hitStrokeWidth/2),v=r.radius()+e.hitStrokeWidth/2;x.beginPath(),x.arc(r.x(),r.y(),v,0,2*Math.PI),x.arc(r.x(),r.y(),a,0,2*Math.PI,!0),x.closePath(),x.fillStrokeShape(r)},n=F({index:e.index,x:e.x,y:e.y,draggable:e.draggable,rotation:e.rotation,visible:e.visible,choosable:e.choosable}),S=F({radius:e.radius,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:c}),o=F({radius:e.radius,fill:"rgba(0, 0, 0, 0)",stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:e.isMask,hitFunc:c});function k(){n.index=e.index,n.x=e.x,n.y=e.y,n.draggable=e.draggable,n.rotation=e.rotation,n.visible=e.visible,n.choosable=e.choosable}function N(){S.radius=e.radius,S.fill=e.fill,S.stroke=e.stroke,S.strokeWidth=e.strokeWidth,S.hitStrokeWidth=e.hitStrokeWidth}function Q(){o.radius=e.radius,o.stroke=e.mask,o.strokeWidth=e.strokeWidth+e.maskWidth*2,o.visible=e.isMask}pe(()=>e,()=>{k(),N(),Q()},{deep:!0});function K(x){if(e.index>0){i.global.hover.id=e.index,i.global.hover.type=Y.Circle;const r=Math.atan2(n.y-x.evt.layerY,n.x-x.evt.layerX),a=n.x+S.radius*Math.cos(r+Math.PI),v=n.y+S.radius*Math.sin(r+Math.PI);i.global.hover.x=a,i.global.hover.y=v}i.global.drawing&&(i.global.clicked=[e.index])}function V(x){if(i.global.hover.id===e.index){const r=Math.atan2(n.y-x.evt.layerY,n.x-x.evt.layerX),a=n.x+S.radius*Math.cos(r+Math.PI),v=n.y+S.radius*Math.sin(r+Math.PI);i.global.hover.x=a,i.global.hover.y=v}}function O(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function g(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(x,r)=>{const a=oe("v-circle"),v=oe("v-group");return D(),se(v,{ref:"circleGroup",config:n,onMouseenter:K,onMouseout:O,onMousemove:V,onClick:g},{default:j(()=>[P(a,{config:o},null,8,["config"]),P(a,{config:S},null,8,["config"]),ve(x.$slots,"default")]),_:3},8,["config"])}}}),nt=ue({__name:"CircleThreePoints",props:{points:{type:Array,required:!0,validator(M){return M.length===6}},..._e},setup(M){const i=fe(),e=M,c=(r,a)=>{const v=Math.abs(a.radius()-e.hitStrokeWidth/2),E=a.radius()+e.hitStrokeWidth/2;r.beginPath(),r.arc(a.x(),a.y(),E,0,2*Math.PI),r.arc(a.x(),a.y(),v,0,2*Math.PI,!0),r.closePath(),r.fillStrokeShape(a)},n=F({visible:e.visible,type:"outter"}),S=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,choosable:e.choosable}),o=F({radius:0,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:c}),k=F({radius:0,fill:"rgba(0, 0, 0, 0)",stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:e.isMask,hitFunc:c});function N(r,a){S.index=e.index,S.x=r,S.y=a,S.draggable=e.draggable,S.rotation=e.rotation,S.choosable=e.choosable}function Q(r){o.radius=r,o.fill=e.fill,o.stroke=e.stroke,o.strokeWidth=e.strokeWidth,o.hitStrokeWidth=e.hitStrokeWidth}function K(r){k.radius=r,k.stroke=e.mask,k.strokeWidth=e.strokeWidth+e.maskWidth*2,k.visible=e.isMask}pe(()=>e,()=>{const r=e.points[0],a=e.points[1],v=e.points[2],E=e.points[3],y=e.points[4],$=e.points[5],m=r*r+a*a,R=v*v+E*E,le=y*y+$*$,W=r*(E-$)-a*(v-y)+v*$-y*E,xe=m*($-E)+R*(a-$)+le*(E-a),me=m*(v-y)+R*(y-r)+le*(r-v),T=m*(y*E-v*$)+R*(r*$-y*a)+le*(v*a-r*E);let b=-xe/(2*W),X=-me/(2*W),Pe=Math.sqrt((xe*xe+me*me-4*W*T)/(4*W*W));isFinite(b)||(b=0),isFinite(X)||(X=0),isFinite(Pe)||(Pe=0),n.visible=e.visible,N(b,X),Q(Pe),K(Pe)},{deep:!0,immediate:!0});function V(r){if(e.index>0){i.global.hover.id=e.index,i.global.hover.type=Y.CircleThreePoints;const a=Math.atan2(S.y-r.evt.layerY,S.x-r.evt.layerX),v=S.x+o.radius*Math.cos(a+Math.PI),E=S.y+o.radius*Math.sin(a+Math.PI);i.global.hover.x=v,i.global.hover.y=E}i.global.drawing&&(i.global.clicked=[e.index])}function O(r){if(i.global.hover.id===e.index){const a=Math.atan2(S.y-r.evt.layerY,S.x-r.evt.layerX),v=S.x+o.radius*Math.cos(a+Math.PI),E=S.y+o.radius*Math.sin(a+Math.PI);i.global.hover.x=v,i.global.hover.y=E}}function g(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function x(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(r,a)=>{const v=oe("v-circle"),E=oe("v-group");return D(),se(E,{config:n},{default:j(()=>[P(E,{ref:"circleGroup",config:S,onMouseenter:V,onMouseout:g,onMousemove:O,onClick:x},{default:j(()=>[P(v,{config:k},null,8,["config"]),P(v,{config:o},null,8,["config"]),ve(r.$slots,"default")]),_:3},8,["config"]),ve(r.$slots,"outter")]),_:3},8,["config"])}}}),Te=ue({__name:"Ellipse",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},rowX:{type:Number,required:!0},rowY:{type:Number,required:!0},colX:{type:Number,required:!0},colY:{type:Number,required:!0},..._e},setup(M){const i=fe(),e=M,c=(a,v)=>{const E=Math.abs(v.radiusX()-e.hitStrokeWidth/2),y=Math.abs(v.radiusY()-e.hitStrokeWidth/2),$=v.radiusX()+e.hitStrokeWidth/2,m=v.radiusY()+e.hitStrokeWidth/2;a.beginPath(),a.ellipse(v.x(),v.y(),$,m,0,0,2*Math.PI,!1),a.ellipse(v.x(),v.y(),E,y,0,0,2*Math.PI,!0),a.closePath(),a.fillStrokeShape(v)},n=Math.sqrt(Math.pow(e.x-e.rowX,2)+Math.pow(e.y-e.rowY,2)),S=Math.sqrt(Math.pow(e.x-e.colX,2)+Math.pow(e.y-e.colY,2)),o=F({index:e.index,x:e.x,y:e.y,draggable:!0,rotation:Math.atan2(e.rowY-e.y,e.rowX-e.x)*180/Math.PI,visible:e.visible,choosable:e.choosable}),k=F({radiusX:n,radiusY:S,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:c}),N=F({radiusX:n,radiusY:S,fill:"rgba(0, 0, 0, 0)",stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:!1,hitFunc:c});function Q(){o.index=e.index,o.x=e.x,o.y=e.y,o.draggable=e.draggable,o.rotation=Math.atan2(e.rowY-e.y,e.rowX-e.x)*180/Math.PI,o.visible=e.visible,o.choosable=e.choosable}function K(a,v){N.radiusX=a,N.radiusY=v,N.stroke=e.mask,N.strokeWidth=e.strokeWidth+e.maskWidth*2,N.visible=e.isMask}function V(a,v){k.radiusX=a,k.radiusY=v,k.fill=e.fill,k.stroke=e.stroke,k.strokeWidth=e.strokeWidth,k.hitStrokeWidth=e.hitStrokeWidth}pe(()=>e,()=>{const a=Math.sqrt(Math.pow(e.x-e.rowX,2)+Math.pow(e.y-e.rowY,2)),v=Math.sqrt(Math.pow(e.x-e.colX,2)+Math.pow(e.y-e.colY,2));Q(),K(a,v),V(a,v)},{deep:!0,immediate:!0});function O(a){if(e.index>0){i.global.hover.id=e.index,i.global.hover.type=Y.Ellipse;const v=(Math.atan2(o.y-a.evt.layerY,o.x-a.evt.layerX)+3*Math.PI-o.rotation*Math.PI/180)%(2*Math.PI);let E,y;const $=k.radiusX,m=k.radiusY;v===Math.PI/2||v===3*Math.PI/2?(E=0,y=m):v>=0&&v<Math.PI/2||v>3*Math.PI/2&&v<=2*Math.PI?(E=$*m/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)),y=$*m*Math.tan(v)/Math.sqrt(m*m+Math.pow($*Math.tan(v),2))):(E=-($*m)/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)),y=-($*m*Math.tan(v))/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)));const R=o.rotation*Math.PI/180;i.global.hover.x=o.x+E*Math.cos(-R)-y*Math.sin(-R),i.global.hover.y=o.y+E*Math.sin(-R)+y*Math.cos(-R)}i.global.drawing&&(i.global.clicked=[e.index])}function g(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function x(a){if(i.global.hover.id===e.index&&!i.global.drawing){const v=(Math.atan2(o.y-a.evt.layerY,o.x-a.evt.layerX)+3*Math.PI-o.rotation*Math.PI/180)%(2*Math.PI);let E,y;const $=k.radiusX,m=k.radiusY;v===Math.PI/2||v===3*Math.PI/2?(E=0,y=m):v>=0&&v<Math.PI/2||v>3*Math.PI/2&&v<=2*Math.PI?(E=$*m/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)),y=$*m*Math.tan(v)/Math.sqrt(m*m+Math.pow($*Math.tan(v),2))):(E=-($*m)/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)),y=-($*m*Math.tan(v))/Math.sqrt(m*m+Math.pow($*Math.tan(v),2)));const R=o.rotation*Math.PI/180;i.global.hover.x=o.x+E*Math.cos(R)-y*Math.sin(R),i.global.hover.y=o.y+E*Math.sin(R)+y*Math.cos(R)}}function r(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(a,v)=>{const E=oe("v-ellipse"),y=oe("v-group");return D(),se(y,{ref:"ellipseGroup",config:o,onMouseenter:O,onMouseout:g,onMousemove:x,onClick:r},{default:j(()=>[P(E,{config:N},null,8,["config"]),P(E,{config:k},null,8,["config"]),ve(a.$slots,"default")]),_:3},8,["config"])}}}),rt=ue({__name:"EllipseFocus",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},focusX:{type:Number,required:!0},focusY:{type:Number,required:!0},inX:{type:Number,required:!0},inY:{type:Number,required:!0},..._e},setup(M){const i=fe(),e=M,c=F({x:e.x,y:e.y,rowX:0,rowY:0,colX:0,colY:0,visible:e.visible,choosable:e.choosable,isMask:e.isMask,...e});pe(()=>e,()=>{const k=Math.atan2(e.y-e.focusY,e.x-e.focusX),N=Math.sqrt(Math.pow(e.x-e.focusX,2)+Math.pow(e.y-e.focusY,2)),Q=(e.inX-e.x)*Math.cos(-k)-(e.inY-e.y)*Math.sin(-k),K=(e.inX-e.x)*Math.sin(-k)+(e.inY-e.y)*Math.cos(-k),V=(Math.sqrt(Math.pow(Q-N,2)+Math.pow(K,2))+Math.sqrt(Math.pow(Q+N,2)+Math.pow(K,2)))/2,O=N,g=Math.sqrt(V*V-O*O);c.x=e.x,c.y=e.y,c.rowX=V*Math.cos(k)+e.x,c.rowY=V*Math.sin(k)+e.y,c.colX=e.x-g*Math.sin(k),c.colY=e.y+g*Math.cos(k),c.visible=e.visible,c.choosable=e.choosable,c.isMask=e.isMask},{deep:!0,immediate:!0});function n(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.EllipseFocus)}function S(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function o(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(k,N)=>{const Q=oe("v-group");return D(),se(Q,{index:e.index,visible:c.visible,onMouseenter:n,onMouseout:S,onClick:o},{default:j(()=>[P(Te,ae(ne({...c})),{default:j(()=>[ve(k.$slots,"inner")]),_:3},16),ve(k.$slots,"default")]),_:3},8,["index","visible"])}}}),De=ue({__name:"Hyperbola",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},rowX:{type:Number,required:!0},rowY:{type:Number,required:!0},colX:{type:Number,required:!0},colY:{type:Number,required:!0},rightPoints:{type:Array,default:[200,200,200,-200],validator(M){return M.length===4}},leftPoints:{type:Array,default:[-200,200,-200,-200],validator(M){return M.length===4}},..._e},setup(M){const i=fe(),e=M,c=[],n=[],S=Math.PI/180;for(let m=-360;m<=360;++m){var o=m*S;c.push(Math.cosh(o)),n.push(Math.sinh(o))}function k(m,R,le,W,xe,me,T){const b=Math.sqrt(Math.pow(e.x-e.rowX,2)+Math.pow(e.y-e.rowY,2)),X=Math.sqrt(Math.pow(e.x-e.colX,2)+Math.pow(e.y-e.colY,2));let Pe=Math.max(W,me),Se=Math.min(W,me),de=Math.max(xe,T),Xe=Math.min(xe,T),Le=!1;for(let Me=0;Me<=720;Me+=1){let he=0,Ye=0;le?(he=b*c[Me]*R,Ye=X*n[Me]*R):(he=b*c[720-Me]*R,Ye=X*n[720-Me]*R),Le?(he<=Pe&&he>=Se||Ye<=de&&Ye>=Xe)&&m.lineTo(he,Ye):(he<=Pe&&he>=Se||Ye<=de&&Ye>=Xe)&&(m.moveTo(he,Ye),Le=!0)}}const N=(m,R)=>{m.beginPath(),k(m,1,!0,e.rightPoints[0],e.rightPoints[1],e.rightPoints[2],e.rightPoints[3]),k(m,1,!1,e.rightPoints[0],e.rightPoints[1],e.rightPoints[2],e.rightPoints[3]),k(m,-1,!0,e.leftPoints[0],e.leftPoints[1],e.leftPoints[2],e.leftPoints[3]),k(m,-1,!1,e.leftPoints[0],e.leftPoints[1],e.leftPoints[2],e.leftPoints[3]),m.lineWidth=e.hitStrokeWidth,m.stroke(),m.fillStrokeShape(R)},Q=Math.sqrt(Math.pow(e.x-e.rowX,2)+Math.pow(e.y-e.rowY,2)),K=Math.sqrt(Math.pow(e.x-e.colX,2)+Math.pow(e.y-e.colY,2)),V=F({index:e.index,x:e.x,y:e.y,draggable:e.draggable,rotation:Math.atan2(e.rowY-e.y,e.rowX-e.x)*180/Math.PI,visible:e.visible,choosable:e.choosable}),O=F({sceneFunc:function(m,R){m.beginPath(),k(m,1,!0,e.rightPoints[0],e.rightPoints[1],e.rightPoints[2],e.rightPoints[3]),k(m,-1,!0,e.leftPoints[0],e.leftPoints[1],e.leftPoints[2],e.leftPoints[3]),m.fillStrokeShape(R)},fill:e.fill,radiusX:Q,radiusY:K,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:N}),g=F({sceneFunc:function(m,R){m.beginPath(),k(m,1,!0,e.rightPoints[0],e.rightPoints[1],e.rightPoints[2],e.rightPoints[3]),k(m,-1,!0,e.leftPoints[0],e.leftPoints[1],e.leftPoints[2],e.leftPoints[3]),m.fillStrokeShape(R)},fill:"rgba(0, 0, 0, 0)",stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:!1,hitFunc:N});function x(){V.index=e.index,V.x=e.x,V.y=e.y,V.draggable=e.draggable,V.rotation=Math.atan2(e.rowY-e.y,e.rowX-e.x)*180/Math.PI,V.visible=e.visible,V.choosable=e.choosable}function r(){O.fill=e.fill,O.stroke=e.stroke,O.strokeWidth=e.strokeWidth,O.hitStrokeWidth=e.hitStrokeWidth,O.radiusX=Math.sqrt(Math.pow(e.x-e.rowX,2)+Math.pow(e.y-e.rowY,2)),O.radiusY=Math.sqrt(Math.pow(e.x-e.colX,2)+Math.pow(e.y-e.colY,2))}function a(){g.stroke=e.mask,g.strokeWidth=e.strokeWidth+e.maskWidth*2,g.visible=e.isMask}pe(()=>e,()=>{x(),r(),a()},{deep:!0,immediate:!0});function v(m){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Hyperbola,i.global.hover.x=m.evt.layerX,i.global.hover.y=m.evt.layerY),i.global.drawing&&(i.global.clicked=[e.index])}function E(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function y(m){i.global.hover.id===e.index&&(i.global.hover.x=m.evt.layerX,i.global.hover.y=m.evt.layerY)}function $(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(m,R)=>{const le=oe("v-shape"),W=oe("v-group");return D(),se(W,{ref:"hyperbolaGroup",config:V,onMouseenter:v,onMouseout:E,onMousemove:y,onClick:$},{default:j(()=>[P(le,{config:g},null,8,["config"]),P(le,{config:O},null,8,["config"]),ve(m.$slots,"default")]),_:3},8,["config"])}}}),ct=ue({__name:"HyperbolaFocus",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},focusX:{type:Number,required:!0},focusY:{type:Number,required:!0},inX:{type:Number,required:!0},inY:{type:Number,required:!0},..._e},setup(M){const i=fe(),e=M,c=F({x:e.x,y:e.y,rowX:0,rowY:0,colX:0,colY:0,visible:e.visible,choosable:e.choosable,isMask:e.isMask,...e});pe(()=>e,()=>{const k=Math.atan2(e.y-e.focusY,e.x-e.focusX),N=Math.sqrt(Math.pow(e.x-e.focusX,2)+Math.pow(e.y-e.focusY,2)),Q=(e.inX-e.x)*Math.cos(-k)-(e.inY-e.y)*Math.sin(-k),K=(e.inX-e.x)*Math.sin(-k)+(e.inY-e.y)*Math.cos(-k),V=Math.abs(Math.sqrt(Math.pow(Q-N,2)+Math.pow(K,2))-Math.sqrt(Math.pow(Q+N,2)+Math.pow(K,2)))/2,O=N,g=Math.sqrt(O*O-V*V);c.x=e.x,c.y=e.y,c.rowX=V*Math.cos(k)+e.x,c.rowY=V*Math.sin(k)+e.y,c.colX=e.x-g*Math.sin(k),c.colY=e.y+g*Math.cos(k),c.visible=e.visible,c.choosable=e.choosable,c.isMask=e.isMask},{deep:!0,immediate:!0});function n(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.HyperbolaFocus)}function S(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function o(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(k,N)=>{const Q=oe("v-group");return D(),se(Q,{index:e.index,visible:c.visible,onMouseenter:n,onMouseout:S,onClick:o},{default:j(()=>[P(De,ae(ne({...c})),{default:j(()=>[ve(k.$slots,"inner")]),_:3},16),ve(k.$slots,"default")]),_:3},8,["index","visible"])}}}),ut=ue({__name:"Parabola",props:{points:{type:Array,default:[0,0,0,0,0,0],validator(M){return M.length===6}},scope:{type:Array,default:[-200,200],validator(M){return M.length===2}},..._e},setup(M){const i=fe(),e=M;function c(){const a=e.points[0],v=e.points[1],E=e.points[2],y=e.points[3],$=e.points[4],m=e.points[5];let R=(a-E)*(a-$)*(E-$),le=($*(y-v)+E*(v-m)+a*(m-y))/R,W=($*$*(v-y)+E*E*(m-v)+a*a*(y-m))/R,xe=(E*$*(E-$)*v+$*a*($-a)*y+a*E*(a-E)*m)/R;const me=-W/(2*le),T=(4*le*xe-W*W)/(4*le);return[le,W,xe,me,T]}function n(a,v,E,y){return a*y*y+v*y+E}function S(a){const v=c(),E=e.scope[0]+v[3],y=e.scope[1]+v[3];for(let $=E;$<y;$+=2){const m=$-v[3],R=n(v[0],v[1],v[2],$)-v[4];$===E?a.moveTo(m,R):a.lineTo(m,R)}for(let $=y;$>E;$-=2){const m=$-v[3],R=n(v[0],v[1],v[2],$)-v[4];a.lineTo(m,R)}}const o=F({visible:e.visible,type:"outter"}),k=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,isChecked:e.isChecked,visible:e.visible,choosable:e.choosable}),N=F({sceneFunc:function(a,v){a.beginPath(),S(a),a.fillStrokeShape(v)},fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth}),Q=F({sceneFunc:function(a,v){a.beginPath(),S(a),a.fillStrokeShape(v)},fill:"rgba(0, 0, 0, 0)",stroke:e.mask,strokeWidth:e.maskWidth*2+e.strokeWidth,visible:!1});function K(a,v){k.x=a,k.y=v,k.index=e.index,k.draggable=e.draggable,k.rotation=e.rotation,k.isChecked=e.isChecked,k.visible=e.visible,k.choosable=e.choosable}function V(){N.fill=e.fill,N.stroke=e.stroke,N.strokeWidth=e.strokeWidth,N.hitStrokeWidth=e.hitStrokeWidth}function O(){Q.stroke=e.mask,Q.strokeWidth=e.maskWidth*2+e.strokeWidth,Q.visible=e.isMask}pe(()=>e,()=>{const a=c();let v=a[3],E=a[4];isFinite(v)||(v=0),isFinite(E)||(E=0),o.visible=e.visible,K(v,E),V(),O()},{deep:!0,immediate:!0});function g(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Parabola)}function x(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function r(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(a,v)=>{const E=oe("v-shape"),y=oe("v-group");return D(),se(y,{config:o},{default:j(()=>[P(y,{ref:"parabolaGroup",config:k,onMouseenter:g,onMouseout:x,onClick:r},{default:j(()=>[P(E,{config:Q},null,8,["config"]),P(E,{config:N},null,8,["config"]),ve(a.$slots,"default")]),_:3},8,["config"]),ve(a.$slots,"outter")]),_:3},8,["config"])}}}),ht=ue({__name:"ParabolaFocus",props:{x:{type:Number,required:!0},y:{type:Number,required:!0},focusX:{type:Number,default:4},focusY:{type:Number,default:4},scope:{type:Array,default:[-200,200],validator(M){return M.length===2}},..._e},setup(M){const i=fe(),e=M;function c(){return Math.sqrt(Math.pow(e.y-e.focusY,2)+Math.pow(e.x-e.focusX,2))*2}function n(r,a){return a*a/(2*r)}function S(r){const a=c(),v=e.scope[0],E=e.scope[1];for(let y=v;y<E;y+=2){const $=y,m=n(a,y);y===v?r.moveTo($,m):r.lineTo($,m)}for(let y=E;y>v;y-=2){const $=y,m=n(a,y);r.lineTo($,m)}}const o=F({index:e.index,x:e.x,y:e.y,draggable:e.draggable,rotation:Math.atan2(e.y-e.focusY,e.x-e.focusX)*180/Math.PI+90,isChecked:e.isChecked,visible:e.visible,choosable:e.choosable}),k=F({sceneFunc:function(r,a){r.beginPath(),S(r),r.fillStrokeShape(a)},stroke:e.mask,strokeWidth:e.maskWidth*2+e.strokeWidth,visible:!1}),N=F({sceneFunc:function(r,a){r.beginPath(),S(r),r.fillStrokeShape(a)},stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,hitStrokeWidth:e.hitStrokeWidth});function Q(){o.index=e.index,o.x=e.x,o.y=e.y,o.draggable=e.draggable,o.rotation=Math.atan2(e.y-e.focusY,e.x-e.focusX)*180/Math.PI+90,o.isChecked=e.isChecked,o.visible=e.visible,o.choosable=e.choosable}function K(){N.fill=e.fill,N.stroke=e.stroke,N.strokeWidth=e.strokeWidth,N.hitStrokeWidth=e.hitStrokeWidth}function V(){k.stroke=e.mask,k.strokeWidth=e.maskWidth*2+e.strokeWidth,k.visible=e.isMask}pe(()=>e,()=>{Q(),K(),V()},{deep:!0});function O(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.ParabolaFocus)}function g(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function x(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(r,a)=>{const v=oe("v-shape"),E=oe("v-group");return D(),se(E,{ref:"parabolaGroup",config:o,onMouseenter:O,onMouseout:g,onClick:x},{default:j(()=>[P(v,{config:k},null,8,["config"]),P(v,{config:N},null,8,["config"]),ve(r.$slots,"default")]),_:3},8,["config"])}}}),dt=ue({__name:"QuadraticBezier",props:{points:{type:Array,required:!0,validator(M){return M.length===6}},..._e},setup(M){const i=fe(),e=M,c=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,isChecked:e.isChecked,visible:e.visible,choosable:e.choosable}),n=F({data:`M ${e.points[0]} ${e.points[1]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[4]} ${e.points[5]},
           M ${e.points[4]} ${e.points[5]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[0]} ${e.points[1]}`,stroke:e.mask,strokeWidth:e.maskWidth*2+e.strokeWidth,visible:!1}),S=F({data:`M ${e.points[0]} ${e.points[1]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[4]} ${e.points[5]},
           M ${e.points[4]} ${e.points[5]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[0]} ${e.points[1]}`,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,hitStrokeWidth:e.hitStrokeWidth});function o(){c.index=e.index,c.draggable=e.draggable,c.rotation=e.rotation,c.isChecked=e.isChecked,c.visible=e.visible,c.choosable=e.choosable}function k(){n.data=`M ${e.points[0]} ${e.points[1]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[4]} ${e.points[5]},
                            M ${e.points[4]} ${e.points[5]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[0]} ${e.points[1]}`,n.stroke=e.mask,n.strokeWidth=e.maskWidth*2+e.strokeWidth,n.visible=e.isMask}function N(){S.data=`M ${e.points[0]} ${e.points[1]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[4]} ${e.points[5]},
                        M ${e.points[4]} ${e.points[5]}, Q ${e.points[2]} ${e.points[3]}, ${e.points[0]} ${e.points[1]}`,S.stroke=e.stroke,S.strokeWidth=e.strokeWidth,S.fill=e.fill,S.hitStrokeWidth=e.hitStrokeWidth}pe(()=>e,()=>{o(),k(),N()},{deep:!0});function Q(g){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.QuadraticBezier,i.global.hover.x=g.evt.layerX,i.global.hover.y=g.evt.layerY),i.global.drawing&&(i.global.clicked=[e.index])}function K(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function V(g){i.global.hover.id===e.index&&(i.global.hover.x=g.evt.layerX,i.global.hover.y=g.evt.layerY)}function O(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(g,x)=>{const r=oe("v-path"),a=oe("v-group");return D(),se(a,{ref:"pointerGroup",config:c,onMouseenter:Q,onMouseout:K,onMousemove:V,onClick:O},{default:j(()=>[P(r,{config:n},null,8,["config"]),P(r,{config:S},null,8,["config"]),ve(g.$slots,"default")]),_:3},8,["config"])}}}),ft=ue({__name:"CubicBezier",props:{points:{type:Array,required:!0,validator(M){return M.length===8}},..._e},setup(M){const i=fe(),e=M,c=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,isChecked:e.isChecked,visible:e.visible,choosable:e.choosable});function n(){return`M ${e.points[0]} ${e.points[1]}, C ${e.points[2]} ${e.points[3]},
              ${e.points[4]} ${e.points[5]}, ${e.points[6]} ${e.points[7]},
            M ${e.points[6]} ${e.points[7]}, C ${e.points[4]} ${e.points[5]},
              ${e.points[2]} ${e.points[3]}, ${e.points[0]} ${e.points[1]}`}const S=F({data:n(),stroke:e.mask,strokeWidth:e.maskWidth*2+e.strokeWidth,visible:!1}),o=F({data:n(),stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,hitStrokeWidth:e.hitStrokeWidth});function k(){c.index=e.index,c.draggable=e.draggable,c.rotation=e.rotation,c.isChecked=e.isChecked,c.visible=e.visible,c.choosable=e.choosable}function N(){S.data=n(),S.stroke=e.mask,S.strokeWidth=e.maskWidth*2+e.strokeWidth,S.visible=e.isMask}function Q(){o.data=n(),o.stroke=e.stroke,o.strokeWidth=e.strokeWidth,o.fill=e.fill,o.hitStrokeWidth=e.hitStrokeWidth}pe(()=>e,()=>{k(),N(),Q()},{deep:!0});function K(x){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.CubicBezier,i.global.hover.x=x.evt.layerX,i.global.hover.y=x.evt.layerY),i.global.drawing&&(i.global.clicked=[e.index])}function V(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None),i.global.drawing&&i.global.hover.id===e.index&&(i.global.clicked=[])}function O(x){i.global.hover.id===e.index&&(i.global.hover.x=x.evt.layerX,i.global.hover.y=x.evt.layerY)}function g(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(x,r)=>{const a=oe("v-path"),v=oe("v-group");return D(),se(v,{ref:"pointerGroup",config:c,onMouseenter:K,onMouseout:V,onMousemove:O,onClick:g},{default:j(()=>[P(a,{config:S},null,8,["config"]),P(a,{config:o},null,8,["config"]),ve(x.$slots,"default")]),_:3},8,["config"])}}}),pt=ue({__name:"Rectangle",props:{points:{type:Array,required:!0,validator(M){return M.length>=6}},..._e},setup(M){const i=fe(),e=M,c=(g,x)=>{const r={x:x.x()-e.hitStrokeWidth/2,y:x.y()-e.hitStrokeWidth/2,width:x.width()+e.hitStrokeWidth,height:x.height()+e.hitStrokeWidth},a={x:x.x()+e.hitStrokeWidth/2,y:x.y()+e.hitStrokeWidth/2,width:x.width()-e.hitStrokeWidth,height:x.height()-e.hitStrokeWidth};g.beginPath(),g.moveTo(r.x,r.y),g.lineTo(r.x+r.width,r.y),g.lineTo(r.x+r.width,r.y+r.height),g.lineTo(r.x,r.y+r.height),g.lineTo(r.x,r.y),g.lineTo(a.x,a.y),g.lineTo(a.x,a.y+a.height),g.lineTo(a.x+a.width,a.y+a.height),g.lineTo(a.x+a.width,a.y),g.lineTo(a.x,a.y),g.closePath(),g.fillStrokeShape(x)},n=F({index:e.index,x:e.points[0],y:e.points[1],draggable:e.draggable,rotation:Math.atan2(e.points[1]-e.points[3],e.points[0]-e.points[2])*180/Math.PI-180,visible:e.visible,choosable:e.choosable}),S=F({x:0,y:0,width:Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),height:Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2)),stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:!1,hitFunc:c}),o=F({x:0,y:0,width:Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),height:Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2)),fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:c});function k(){n.index=e.index,n.x=e.points[0],n.y=e.points[1],n.draggable=e.draggable,n.rotation=Math.atan2(e.points[1]-e.points[3],e.points[0]-e.points[2])*180/Math.PI-180,n.visible=e.visible,n.choosable=e.choosable}function N(g,x){S.width=g,S.height=x,S.stroke=e.mask,S.strokeWidth=e.strokeWidth+e.maskWidth*2,S.visible=e.isMask}function Q(g,x){o.width=g,o.height=x,o.stroke=e.stroke,o.strokeWidth=e.strokeWidth,o.hitStrokeWidth=e.hitStrokeWidth,o.fill=e.fill}pe(()=>e,()=>{const g=Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),x=Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2));k(),N(g,x),Q(g,x)},{deep:!0,immediate:!0});function K(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Rectangle)}function V(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function O(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(g,x)=>{const r=oe("v-rect"),a=oe("v-group");return D(),se(a,{ref:"rectangleGroup",config:n,onMouseenter:K,onMouseout:V,onClick:O},{default:j(()=>[P(r,{config:S},null,8,["config"]),P(r,{config:o},null,8,["config"]),ve(g.$slots,"default")]),_:3},8,["config"])}}}),bt=ue({__name:"Square",props:{points:{type:Array,required:!0,validator(M){return M.length>=6}},..._e},setup(M){const i=fe(),e=M,c=(g,x)=>{const r={x:x.x()-e.hitStrokeWidth/2,y:x.y()-e.hitStrokeWidth/2,width:x.width()+e.hitStrokeWidth,height:x.height()+e.hitStrokeWidth},a={x:x.x()+e.hitStrokeWidth/2,y:x.y()+e.hitStrokeWidth/2,width:x.width()-e.hitStrokeWidth,height:x.height()-e.hitStrokeWidth};g.beginPath(),g.moveTo(r.x,r.y),g.lineTo(r.x+r.width,r.y),g.lineTo(r.x+r.width,r.y+r.height),g.lineTo(r.x,r.y+r.height),g.lineTo(r.x,r.y),g.lineTo(a.x,a.y),g.lineTo(a.x,a.y+a.height),g.lineTo(a.x+a.width,a.y+a.height),g.lineTo(a.x+a.width,a.y),g.lineTo(a.x,a.y),g.closePath(),g.fillStrokeShape(x)},n=F({index:e.index,x:e.points[0],y:e.points[1],draggable:e.draggable,rotation:Math.atan2(e.points[1]-e.points[3],e.points[0]-e.points[2])*180/Math.PI-180,visible:e.visible,choosable:e.choosable}),S=F({x:0,y:0,width:Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),height:Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2)),stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,visible:!1,hitFunc:c}),o=F({x:0,y:0,width:Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),height:Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2)),fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,hitFunc:c});function k(){n.index=e.index,n.x=e.points[0],n.y=e.points[1],n.draggable=e.draggable,n.rotation=Math.atan2(e.points[1]-e.points[3],e.points[0]-e.points[2])*180/Math.PI-180,n.visible=e.visible,n.choosable=e.choosable}function N(g,x){S.width=g,S.height=x,S.stroke=e.mask,S.strokeWidth=e.strokeWidth+e.maskWidth*2,S.visible=e.isMask}function Q(g,x){o.width=g,o.height=x,o.stroke=e.stroke,o.strokeWidth=e.strokeWidth,o.hitStrokeWidth=e.hitStrokeWidth,o.fill=e.fill}pe(()=>e,()=>{const g=Math.sqrt(Math.pow(e.points[0]-e.points[2],2)+Math.pow(e.points[1]-e.points[3],2)),x=Math.sqrt(Math.pow(e.points[2]-e.points[4],2)+Math.pow(e.points[3]-e.points[5],2));k(),N(g,x),Q(g,x)},{deep:!0,immediate:!0});function K(){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Square)}function V(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function O(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(g,x)=>{const r=oe("v-rect"),a=oe("v-group");return D(),se(a,{ref:"squareGroup",config:n,onMouseenter:K,onMouseout:V,onClick:O},{default:j(()=>[P(r,{config:S},null,8,["config"]),P(r,{config:o},null,8,["config"]),ve(g.$slots,"default")]),_:3},8,["config"])}}}),vt=ue({__name:"Polygon",props:{points:{type:Array,required:!0,validator(M){return M.length>0}},..._e},setup(M){const i=fe(),e=M;let c="";e.points.forEach(x=>{c===""?c+=`M ${x[0]} ${x[1]} `:c+=`L ${x[0]} ${x[1]} `}),c+="z";const n=F({index:e.index,x:0,y:0,draggable:e.draggable,rotation:e.rotation,visible:e.visible,choosable:e.choosable}),S=F({data:c,stroke:e.mask,strokeWidth:e.strokeWidth+e.maskWidth*2,dash:e.dash,visible:!1}),o=F({data:c,fill:"rgba(0, 0, 0, 1)",stroke:e.stroke,strokeWidth:e.strokeWidth,hitStrokeWidth:e.hitStrokeWidth,dash:e.dash});function k(){n.index=e.index,n.draggable=e.draggable,n.rotation=e.rotation,n.visible=e.visible,n.choosable=e.choosable}function N(x){S.data=x,S.stroke=e.mask,S.strokeWidth=e.strokeWidth+e.maskWidth*2,S.fill=e.fill,S.dash=e.dash,S.visible=e.isMask}function Q(x){o.data=x,o.strokeWidth=e.strokeWidth,o.hitStrokeWidth=e.hitStrokeWidth,o.fill=e.fill,o.dash=e.dash}pe(()=>e,()=>{let x="";e.points.forEach(r=>{x===""?x+=`M ${r[0]} ${r[1]} `:x+=`L ${r[0]} ${r[1]} `}),x+="z",k(),N(x),Q(x)},{deep:!0,immediate:!0});function K(x){e.index>0&&(i.global.hover.id=e.index,i.global.hover.type=Y.Line),i.global.drawing&&(i.global.clicked=[e.index])}function V(){e.index===i.global.hover.id&&(i.global.hover.id=-1,i.global.hover.type=Y.None)}function O(x){}function g(){e.index>0&&(i.global.ctrl?i.global.clicked.push(e.index):i.global.clicked=[e.index])}return(x,r)=>{const a=oe("v-path"),v=oe("v-group");return D(),se(v,{ref:"lineGroup",config:n,onMouseenter:K,onMouseout:V,onMousemove:O,onClick:g},{default:j(()=>[P(a,{config:S},null,8,["config"]),P(a,{config:o},null,8,["config"]),ve(x.$slots,"default")]),_:3},8,["config"])}}}),ei=ue({__name:"DrawAllShapes",setup(M){const i=fe(),e=new Set;return pe(()=>i.global,()=>{const c=new Set(e);i.global.clicked.forEach(n=>{const S=i.allShapes.get(n);if(S)switch(c.has(n)?c.delete(n):e.add(n),S){case Y.Point:i.pointList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Line:i.lineList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.LineSegment:i.lineSegmentsList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Circle:i.circleList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.CircleThreePoints:i.circleThreePointsList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Ellipse:i.ellipseList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.EllipseFocus:i.ellipseFocusList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Hyperbola:i.hyperbolaList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.HyperbolaFocus:i.hyperbolaFocusList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Parabola:i.parabolaList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.ParabolaFocus:i.parabolaFocusList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.QuadraticBezier:i.quadraticBezierList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.CubicBezier:i.cubicBezierList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Rectangle:i.rectangleList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Square:i.squareList.forEach(o=>{o.index===n&&(o.isMask=!0)});break;case Y.Polygon:i.polygonList.forEach(o=>{o.index===n&&(o.isMask=!0)});break}}),c.forEach(n=>{const S=i.allShapes.get(n);if(S)switch(e.delete(n),S){case Y.Point:i.pointList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Line:i.lineList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.LineSegment:i.lineSegmentsList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Circle:i.circleList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.CircleThreePoints:i.circleThreePointsList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Ellipse:i.ellipseList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.EllipseFocus:i.ellipseFocusList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Hyperbola:i.hyperbolaList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.HyperbolaFocus:i.hyperbolaFocusList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Parabola:i.parabolaList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.ParabolaFocus:i.parabolaFocusList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.QuadraticBezier:i.quadraticBezierList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.CubicBezier:i.cubicBezierList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Rectangle:i.rectangleList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Square:i.squareList.forEach(o=>{o.index===n&&(o.isMask=!1)});break;case Y.Polygon:i.polygonList.forEach(o=>{o.index===n&&(o.isMask=!1)});break}})},{deep:!0}),(c,n)=>{const S=oe("v-group");return D(),re(ke,null,[P(S,{type:"otherShapes"},{default:j(()=>[(D(!0),re(ke,null,ge(q(i).lineList,o=>(D(),se(ot,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).lineSegmentsList,o=>(D(),se(lt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).circleList,o=>(D(),se(at,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).circleThreePointsList,o=>(D(),se(nt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).ellipseList,o=>(D(),se(Te,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).ellipseFocusList,o=>(D(),se(rt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).hyperbolaList,o=>(D(),se(De,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).hyperbolaFocusList,o=>(D(),se(ct,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).parabolaList,o=>(D(),se(ut,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).parabolaFocusList,o=>(D(),se(ht,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).quadraticBezierList,o=>(D(),se(dt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).cubicBezierList,o=>(D(),se(ft,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).rectangleList,o=>(D(),se(pt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).squareList,o=>(D(),se(bt,ae(ne({...o})),null,16))),256)),(D(!0),re(ke,null,ge(q(i).polygonList,o=>(D(),se(vt,ae(ne({...o})),null,16))),256))]),_:1}),P(S,{type:"points"},{default:j(()=>[(D(!0),re(ke,null,ge(q(i).pointList,o=>(D(),se(Z,ae(ne({...o})),null,16))),256))]),_:1})],64)}}}),ti=ue({__name:"Content",props:{width:{type:Number,required:!0},height:{type:Number,required:!0}},setup(M){let i=!1,e=!1;const c={type:Y.None,isLen:!1,lenValue:0,id:[]},n={type:Y.None,isAngle:!1,angleValue:0,id:[]},S={x:0,y:0,id:-1,type:Y.None},o=F({x:0,y:0,width:0,height:0,fill:"rgba(100, 100, 100, 0.2)",stroke:"rgba(0, 0, 200, 1)",strokeWidth:.5,visible:!1}),k={radius:3,fill:"rgba(255, 50, 0, 1)",strokeWidth:1,maskWidth:2,mask:"rgba(255, 50, 0, 1)",visible:!0,choosable:!1},N=F({x:0,y:0,leaves:[-1],radius:3,fill:"rgba(255, 50, 0, 1)",strokeWidth:1,maskWidth:2,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),Q=F({points:[[0,0]],leaves:[-1],stroke:"rgba(0, 0, 200, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),K=F({points:[0,0,0,0],leaves:[-1,-1],stroke:"rgba(0, 0, 200, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),V=F({x:0,y:0,inX:0,inY:0,radius:1,leaves:[-1,-1],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),O=F({points:[0,0,0,0,0,0],leaves:[-1,-1,-1],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),g=F({x:0,y:0,rowX:0,rowY:0,colX:0,colY:0,leaves:[-1,-1,-1],params:[0,0,0,0,0,0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),x=F({x:0,y:0,focusX:0,focusY:0,inX:0,inY:0,leaves:[-1,-1,-1],params:[0,0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),r=F({x:0,y:0,rowX:0,rowY:0,colX:0,colY:0,leaves:[-1,-1,-1],params:[0,0,0,0,0,0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),a=F({x:0,y:0,focusX:0,focusY:0,inX:0,inY:0,leaves:[-1,-1,-1],params:[0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),v=F({points:[0,0,0,0,0,0],leaves:[-1,-1,-1],scope:[-200,200],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),E=F({x:0,y:0,focusX:0,focusY:0,leaves:[-1,-1],scope:[-200,200],p:0,fill:"rgba(0, 0, 0, 0)",stroke:"rgba(46, 139, 87, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),y=F({points:[0,0,0,0,0,0],leaves:[-1,-1,-1],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(160, 82, 45, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),$=F({points:[0,0,0,0,0,0,0,0],leaves:[-1,-1,-1,-1],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(160, 82, 45, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),m=F({points:[0,0,0,0,0,0],leaves:[-1,-1,-1],params:[0,0,0,0,0,0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 200, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),R=F({points:[0,0,0,0,0,0],leaves:[-1,-1],params:[0,0],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 200, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),le=F({points:[[0,0]],leaves:[-1],fill:"rgba(0, 0, 0, 0)",stroke:"rgba(0, 0, 200, 1)",strokeWidth:1,maskWidth:1,mask:"rgba(255, 50, 0, 1)",visible:!1,choosable:!1}),W=fe(),xe=M;let me=F({width:0,height:0});pe(()=>xe,()=>{me.width=xe.width,me.height=xe.height},{deep:!0});let T=$e("none"),b=$e(0),X=0,Pe=!1,Se=[];function de(){b.value=0,T.value="none",W.global.drawing=!1,X=0,c.isLen=!1,n.isAngle=!1,Xe()}function Xe(z=!0){z&&(Se=[],Q.points.length>=2&&(Q.points=Q.points.slice(0,Q.points.length-1),W.addLine({...we(Q)})),Q.visible=!1,Q.points=[[0,0]],Q.leaves=[-1],le.points.length>=2&&(le.points=le.points.slice(0,le.points.length-1),W.addPolygon({...we(le)})),le.visible=!1,le.points=[[0,0]],le.leaves=[-1]),N.visible=!1,K.visible=!1,V.visible=!1,O.visible=!1,g.visible=!1,x.visible=!1,r.visible=!1,a.visible=!1,v.visible=!1,E.visible=!1,y.visible=!1,$.visible=!1,m.visible=!1,R.visible=!1}function Le(z){z.key==="Shift"?Pe=!1:z.key==="Control"&&(W.global.ctrl=!1)}function Me(z){if(z.key==="Escape")de();else if(z.key==="Shift")Pe=!0;else if(z.key==="Control")W.global.ctrl=!0;else if(z.key==="Backspace"||z.key==="Delete")W.global.clicked.forEach(C=>{W.deleteShape(C)});else if(z.key==="0"||z.key==="1"||z.key==="2"||z.key==="3"||z.key==="4"||z.key==="5"||z.key==="6"||z.key==="7"||z.key==="8"||z.key==="9"){if(c.isLen)c.lenValue*=10,c.lenValue+=Number(z.key),T.value=`set len ${c.lenValue}`;else if(n.isAngle)n.angleValue*=10,n.angleValue+=Number(z.key),T.value=`set angle ${n.angleValue}`;else if(W.global.clicked.length===1){const C=Number(z.key);W.changeHelper(W.global.clicked[0],C)}}else if(z.key==="Enter")c.isLen?W.changeLength(c.id,c.lenValue,c.type):n.isAngle&&W.changeAngle(n.id,n.angleValue,n.type),de();else if(z.key==="a")if(W.global.clicked.length===2){const C=W.allShapes.get(W.global.clicked[0]),w=W.allShapes.get(W.global.clicked[1]);C===Y.LineSegment&&w===Y.LineSegment&&(n.type=Y.LineSegment,n.isAngle=!0,n.angleValue=0,n.id=[W.global.clicked[0],W.global.clicked[1]],T.value="set angle")}else if(W.global.clicked.length===3){const C=W.allShapes.get(W.global.clicked[0]),w=W.allShapes.get(W.global.clicked[1]),A=W.allShapes.get(W.global.clicked[2]);C===Y.Point&&w===Y.Point&&A===Y.Point&&(n.type=Y.Point,n.isAngle=!0,n.angleValue=0,n.id=[...W.global.clicked],T.value="set angle")}else if(z.ctrlKey){z.preventDefault();const C=[];W.allShapes.forEach((w,A)=>{C.push(A)}),W.global.clicked=C}else W.global.drawing=!0,X=3,b.value===1?(b.value=14,T.value="parabola",N.visible=!1):b.value===14?(b.value=16,T.value="multi-parabola"):de();else if(z.key==="p")W.global.drawing=!0,X=1,b.value===0?(b.value=1,T.value="point",N.visible=!0):b.value===1?(b.value=2,T.value="multi-point",N.visible=!0):b.value===6?(b.value=8,T.value="circle-point",X=3):b.value===8?(b.value=9,T.value="multi-circle-point",X=3):de();else if(z.key==="l")if(W.global.clicked.length===1){const C=W.allShapes.get(W.global.clicked[0]);C&&C===Y.LineSegment&&(c.type=Y.LineSegment,c.isLen=!0,c.lenValue=0,c.id=[W.global.clicked[0]],T.value="set len")}else if(W.global.clicked.length===2){const C=W.allShapes.get(W.global.clicked[0]),w=W.allShapes.get(W.global.clicked[1]);C===Y.Point&&w===Y.Point&&(c.type=Y.Point,c.isLen=!0,c.lenValue=0,c.id=[W.global.clicked[0],W.global.clicked[1]],T.value="set len")}else W.global.drawing=!0,b.value===0?(b.value=3,T.value="line",X=2):b.value===3?(b.value=4,T.value="multi-line",X=1,Q.visible=!0):de();else z.key==="c"?(W.global.drawing=!0,X=2,b.value===0?(b.value=6,T.value="circle"):b.value===6?(b.value=7,T.value="multi-circle"):de()):z.key==="s"?(W.global.drawing=!0,X=2,b.value===0?(b.value=24,T.value="square"):b.value===24?(b.value=25,T.value="multi-square"):b.value===3?(b.value=5,T.value="line-segments",X=2):de()):z.key==="r"?(W.global.drawing=!0,X=3,b.value===0?(b.value=22,T.value="rectangle"):b.value===22?(b.value=23,T.value="multi-rectangle"):de()):z.key==="e"?(W.global.drawing=!0,X=3,b.value===0?(b.value=10,T.value="ellipse"):b.value===10?(b.value=12,T.value="multi-ellipse"):de()):z.key==="h"?(W.global.drawing=!0,X=3,b.value===0?(b.value=18,T.value="hyperbola"):b.value===18?(b.value=20,T.value="multi-hyperbola"):de()):z.key==="f"?(W.global.drawing=!0,X=3,b.value===10?(b.value=11,T.value="ellipse-focus"):b.value===18?(b.value=19,T.value="hyperbola-focus"):b.value===14?(b.value=15,T.value="parabola-focus",X=2):b.value===11?(b.value=13,T.value="multi-ellipse-focus"):b.value===19?(b.value=21,T.value="multi-hyperbola-focus"):b.value===15?(b.value=17,T.value="multi-parabola-focus",X=2):de()):z.key==="o"?(W.global.drawing=!0,X=1,b.value===1&&(b.value=30,T.value="polygon",X=1,le.visible=!0)):z.key==="q"?(W.global.drawing=!0,X=3,b.value===0?(b.value=26,T.value="quadratic-bezier"):b.value===26?(b.value=27,T.value="multi-quadratic-bezier"):de()):z.key==="b"?(W.global.drawing=!0,X=4,b.value===6?(b.value=28,T.value="cubic-bezier"):b.value===28?(b.value=29,T.value="multi-cubic-bezier"):de()):de()}function he(z){z.preventDefault(),de()}function Ye(z){let C=z.evt.layerX,w=z.evt.layerY,A=-1;W.global.hover.type!==Y.None&&(C=W.global.hover.x,w=W.global.hover.y),W.global.hover.type===Y.Point&&(A=W.global.hover.id),W.global.hover.id===-1&&!W.global.ctrl&&(W.global.clicked=[]),X>0&&b!==0&&(X--,Se.push([C,w]),b.value===1||b.value===2?(N.leaves=[A],W.addPoint({...we(N)}),N.leaves=[-1]):b.value===3||b.value===5?X===0?(W.addLineSegments({...we(K)}),N.leaves=[-1,-1],K.visible=!1):X===1&&(K.visible=!0,K.points=[C,w,C,w],K.leaves[0]=A):b.value===6||b.value===7?X===0?(W.addCircle({...we(V)}),N.leaves=[-1,-1]):X===1&&(V.visible=!0,V.x=C,V.y=w,V.inX=C,V.inY=w,V.radius=1,V.leaves[0]=A):b.value===8||b.value===9?X===0?(W.addCircleThreePoints({...we(O)}),N.leaves=[-1,-1,-1]):X===2&&(O.visible=!0,O.points=[C,w,C,w,C,w],O.leaves[0]=A):b.value===4?(Q.points.push([C,w]),Q.leaves.push(-1)):b.value===10||b.value===12?X===0?(W.addEllipse({...we(g)}),g.params=[0,0,0,0,0,0],N.leaves=[-1,-1,-1]):X===2&&(g.x=C,g.y=w,g.colX=C,g.colY=w,g.rowX=C,g.rowY=w,g.visible=!0,g.leaves[0]=A):b.value===18||b.value===20?X===0?(W.addHyperbola({...we(r)}),N.leaves=[-1,-1,-1],r.params=[0,0,0,0,0,0]):X===2&&(r.x=C,r.y=w,r.colX=C,r.colY=w,r.rowX=C,r.rowY=w,r.visible=!0,r.leaves[0]=A):b.value===14||b.value===16?X===0?(W.addParabola({...we(v)}),N.leaves=[-1,-1,-1]):X===2&&(v.points=[C,w,C,w,C,w],v.visible=!0,v.leaves[0]=A):b.value===11||b.value===13?X===0?(W.addEllipseFocus({...we(x)}),N.leaves=[-1,-1,-1],x.params=[0]):X===2&&(x.x=C,x.y=w,x.focusX=C,x.focusY=w,x.inX=C,x.inY=w,x.params=[0],x.visible=!0,x.leaves[0]=A):b.value===19||b.value===21?X===0?(W.addHyperbolaFocus({...we(a)}),N.leaves=[-1,-1,-1],a.params=[0]):X===2&&(a.x=C,a.y=w,a.focusX=C,a.focusY=w,a.inX=C,a.inY=w,a.params=[0],a.visible=!0,a.leaves[0]=A):b.value===15||b.value===17?X===0?(W.addParabolaFocus({...we(E)}),N.leaves=[-1,-1]):X===1&&(E.x=C,E.y=w,E.focusX=C,E.focusY=w,E.p=0,E.visible=!0,E.leaves[0]=A):b.value===22||b.value===23?X===0?(W.addRectangle({...we(m)}),N.leaves=[-1,-1,-1],m.points=[0,0,0,0,0,0],m.params=[0,0,0,0,0,0]):X===2&&(m.visible=!0,m.points=[C,w,C,w,C,w],m.leaves[0]=A):b.value===24||b.value===25?X===0?(W.addSquare({...we(R)}),N.leaves=[-1,-1],R.points=[0,0,0,0,0,0],R.params=[0,0]):X===1&&(R.visible=!0,R.points=[C,w,C,w,C,w],R.params=[0,0],R.leaves[0]=A):b.value===26||b.value===27?X===0?(W.addQuadraticBezier({...we(y)}),N.leaves=[-1,-1,-1],y.points=[0,0,0,0,0,0]):X===2&&(y.visible=!0,y.points=[C,w,C,w,C,w],y.leaves[0]=A):b.value===28||b.value===29?X===0?(W.addCubicBezier({...we($)}),N.leaves=[-1,-1,-1,-1],$.points=[0,0,0,0,0,0,0,0]):X===3&&($.visible=!0,$.points=[C,w,C,w,C,w,C,w],$.leaves[0]=A):b.value===30&&(le.points.push([C,w]),le.leaves.push(-1))),X===0&&(b.value===2?X=1:b.value===5||b.value===7||b.value===17||b.value===25?(X=2,Xe()):b.value===4||b.value===30?(X=1,Xe(!1)):b.value===12||b.value===20||b.value===13||b.value===21||b.value===16||b.value===27||b.value===23||b.value===9?(X=3,Xe()):b.value===29?(X=4,Xe()):de())}function Fe(z,C){if(Pe&&Se.length!==0){const w=Se[Se.length-1][0],A=Se[Se.length-1][1],J=Math.atan2(A-C,w-z),G=Math.PI/8;if(J<G&&J>-G||J>Math.PI-G||J<-Math.PI+G)return[z,A];if(J<5*G&&J>3*G||J>-5*G&&J<-3*G)return[w,C];if(J<7*G&&J>5*G||J>-3*G&&J<-G){const H=z-w,ie=C-A,Ee=Math.sqrt((Math.pow(ie,2)+Math.pow(H,2))/2);return H>0?[w+Ee,A-Ee]:[w-Ee,A+Ee]}else if(J<3*G&&J>G||J>-7*G&&J<-5*G){const H=z-w,ie=C-A,Ee=Math.sqrt((Math.pow(ie,2)+Math.pow(H,2))/2);return H>0?[w+Ee,A+Ee]:[w-Ee,A-Ee]}}return[z,C]}function ze(z){let C=z.evt.layerX,w=z.evt.layerY,A=-1;i&&(o.width=C-o.x,o.height=w-o.y),W.global.hover.type!==Y.None&&(W.global.drawing||e)&&(C=W.global.hover.x,w=W.global.hover.y,A=W.global.hover.id);const J=Fe(C,w);if(e&&Ge(z.evt.clientX,z.evt.clientY),C=J[0],w=J[1],N.x=C,N.y=w,b.value===4){const G=Q.points.length;Q.points[G-1][0]=C,Q.points[G-1][1]=w,Q.leaves[G-1]=A}if((b.value===3||b.value===5)&&X===1&&(K.leaves[1]=A,K.points[2]=C,K.points[3]=w),(b.value===6||b.value===7)&&X===1&&(V.leaves[1]=A,V.inX=C,V.inY=w,V.radius=Math.abs(Math.sqrt(Math.pow(C-V.x,2)+Math.pow(w-V.y,2)))),(b.value===8||b.value===9)&&(X===2?(O.leaves[1]=A,O.points=[...O.points.slice(0,2),C,w,C,w]):X===1&&(O.leaves[2]=A,O.points=[...O.points.slice(0,4),C,w])),b.value===10||b.value===12){if(X===2)g.leaves[1]=A,g.rowX=C,g.rowY=w,g.params=[g.y-w,C-g.x,g.x*w-C*g.y,Math.atan2(g.y-w,g.x-C),Math.sqrt(Math.pow(g.y-w,2)+Math.pow(C-g.x,2)),0];else if(X===1){g.leaves[2]=A;const G=Math.abs(g.params[0]*C+g.params[1]*w+g.params[2])/Math.sqrt(Math.pow(g.params[0],2)+Math.pow(g.params[1],2));g.params[5]=G,g.colX=g.x-G*Math.sin(g.params[3]),g.colY=g.y+G*Math.cos(g.params[3])}}if((b.value===11||b.value===13)&&(X===2?(x.leaves[1]=A,x.focusX=C,x.focusY=w,x.params=[Math.sqrt(Math.pow(x.y-w,2)+Math.pow(C-x.x,2)),Math.atan2(g.y-w,g.x-C)]):X===1&&(x.leaves[2]=A,x.inX=C,x.inY=w)),b.value===18||b.value===20){if(X===2)r.leaves[1]=A,r.rowX=C,r.rowY=w,r.params=[r.y-w,C-r.x,r.x*w-C*r.y,Math.atan2(r.y-w,r.x-C),Math.sqrt(Math.pow(r.y-w,2)+Math.pow(C-r.x,2)),0];else if(X===1){r.leaves[2]=A;const G=Math.abs(r.params[0]*C+r.params[1]*w+r.params[2])/Math.sqrt(Math.pow(r.params[0],2)+Math.pow(r.params[1],2));r.params[5]=G,r.colX=r.x-G*Math.sin(r.params[3]),r.colY=r.y+G*Math.cos(r.params[3])}}if((b.value===19||b.value===21)&&(X===2?(a.leaves[1]=A,a.focusX=C,a.focusY=w,a.params=[Math.sqrt(Math.pow(a.y-w,2)+Math.pow(C-a.x,2))]):X===1&&(a.leaves[2]=A,a.inX=C,a.inY=w)),(b.value===14||b.value===16)&&(X===2?(v.leaves[1]=A,v.points[2]=C,v.points[3]=w):X===1&&(v.leaves[2]=A,v.points[4]=C,v.points[5]=w)),(b.value===15||b.value===17)&&X===1&&(E.leaves[1]=A,E.focusX=C,E.focusY=w,E.p=Math.sqrt(Math.pow(E.y-w,2)+Math.pow(E.x-C,2))*2),(b.value===26||b.value===27)&&(X===2?(y.leaves[1]=A,y.points=[...y.points.slice(0,2),C,w,C,w]):X===1&&(y.leaves[2]=A,y.points=[...y.points.slice(0,4),C,w])),(b.value===28||b.value===29)&&(X===3?($.leaves[1]=A,$.points=[...$.points.slice(0,2),C,w,C,w,C,w]):X===2?($.leaves[2]=A,$.points=[...$.points.slice(0,4),C,w,C,w]):X===1&&($.leaves[3]=A,$.points=[...$.points.slice(0,6),C,w])),b.value===22||b.value===23){if(X===2)m.leaves[1]=A,m.points=[...m.points.slice(0,2),C,w,C,w],m.params=[m.points[1]-w,C-m.points[0],m.points[0]*w-C*m.points[1],Math.atan2(m.points[1]-w,m.points[0]-C),Math.sqrt(Math.pow(m.points[1]-w,2)+Math.pow(C-m.points[0],2)),0];else if(X===1){m.leaves[2]=A;const G=Math.abs(m.params[0]*C+m.params[1]*w+m.params[2])/Math.sqrt(Math.pow(m.params[0],2)+Math.pow(m.params[1],2)),H=m.points[2]-G*Math.sin(m.params[3]+Math.PI),ie=m.points[3]+G*Math.cos(m.params[3]+Math.PI);m.params[5]=G,m.points=[...m.points.slice(0,4),H,ie]}}if((b.value===24||b.value===25)&&X===1){R.leaves[1]=A,R.points=[...R.points.slice(0,2),C,w,C,w],R.params=[Math.atan2(R.points[1]-w,R.points[0]-C),Math.sqrt(Math.pow(R.points[1]-w,2)+Math.pow(C-R.points[0],2))];const G=Math.sqrt(Math.pow(R.points[0]-R.points[2],2)+Math.pow(R.points[1]-R.points[3],2)),H=R.points[2]-G*Math.sin(R.params[0]+Math.PI),ie=R.points[3]+G*Math.cos(R.params[0]+Math.PI);R.points=[...R.points.slice(0,4),H,ie]}if(b.value===30){const G=le.points.length;le.points[G-1][0]=C,le.points[G-1][1]=w,le.leaves[G-1]=A}}function He(z){if(z.button===0)if(W.global.hover.id===-1&&!W.global.drawing){const C=z.layerX,w=z.layerY;i=!0,o.visible=!0,o.x=C,o.y=w}else W.global.hover.id!==-1&&W.global.clicked.length>=1&&!W.global.drawing&&(e=!0,S.id=W.global.hover.id,S.type=W.global.hover.type,S.x=z.clientX,S.y=z.clientY)}function Re(){if(i){i=!1,o.visible=!1,o.x=0,o.y=0,o.width=0,o.height=0;const z=qe.value.getNode().getClientRect(),C=[];Ne.value.getNode().children.forEach(function(w){(w.attrs.type==="otherShapes"||w.attrs.type==="points")&&w.children.forEach(A=>{if(A.attrs.type==="outter")A.children.forEach(J=>{const G=J.getClientRect();z.x<G.x&&z.y<G.y&&z.x+z.width>G.x+G.width&&z.y+z.height>G.y+G.height&&C.push(J.attrs.index)});else{const J=A.getClientRect();z.x<J.x&&z.y<J.y&&z.x+z.width>J.x+J.width&&z.y+z.height>J.y+J.height&&C.push(A.attrs.index)}})}),W.global.clicked=C}e&&(e=!1,S.id=-1,S.type=Y.None)}function Ge(z,C){const w=z-S.x,A=C-S.y,J=new Set;W.global.clicked.forEach(G=>{switch(W.allShapes.get(G)){case Y.Point:J.add(G);break;case Y.Line:W.lineList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.LineSegment:W.lineSegmentsList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.helps.forEach(ie=>{J.add(ie)}))});break;case Y.Circle:W.circleList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.CircleThreePoints:W.circleThreePointsList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.Ellipse:W.ellipseList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prevX+=w,H.prevY+=A)});break;case Y.EllipseFocus:W.ellipseFocusList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prevX+=w,H.prevY+=A)});break;case Y.Hyperbola:W.hyperbolaList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prevX+=w,H.prevY+=A)});break;case Y.HyperbolaFocus:W.hyperbolaFocusList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prevX+=w,H.prevY+=A)});break;case Y.Parabola:W.parabolaList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.ParabolaFocus:W.parabolaFocusList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.QuadraticBezier:W.quadraticBezierList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.CubicBezier:W.cubicBezierList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break;case Y.Rectangle:W.rectangleList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prev[0][0]+=w,H.prev[0][1]+=A)});break;case Y.Square:W.squareList.forEach(H=>{H.index===G&&(H.leaves.forEach(ie=>{J.add(ie)}),H.prev[0][0]+=w,H.prev[0][1]+=A,H.prev[1][0]+=w,H.prev[1][1]+=A)});break;case Y.Polygon:W.polygonList.forEach(H=>{H.index===G&&H.leaves.forEach(ie=>{J.add(ie)})});break}}),J.forEach(G=>{const H=W.getPoint(G);H&&(H.x+=w,H.y+=A)}),J.forEach(G=>{const H=W.getPoint(G);H&&H.callBack(0,0)}),S.x=z,S.y=C}const qe=$e(),Ne=$e(),Be=$e();return it(()=>{Be.value.focus()}),pe(b,()=>{W.global.state!==b.value&&(W.global.state=b.value),b.value!==0&&(N.visible=!0)}),pe(()=>W.global.state,()=>{if(W.global.state!==b.value)switch(b.value=W.global.state,W.global.drawing=!0,b.value){case 0:T.value="none",de();break;case 1:T.value="point",X=1;break;case 3:T.value="line",X=2;break;case 4:T.value="multi-line",Q.visible=!0,X=1;break;case 6:T.value="circle",X=2;break;case 8:T.value="circle-point",X=3;break;case 10:T.value="ellipse",X=3;break;case 11:T.value="ellipse-focus",X=3;break;case 18:T.value="hyperbola",X=3;break;case 19:T.value="hyperbola-focus",X=3;break;case 14:T.value="parabola",X=3;break;case 15:T.value="parabola-foucs",X=2;break;case 26:T.value="quadratic-bezier",X=3;break;case 28:T.value="cubic-bezier",X=4;break;case 22:T.value="rectangle",X=3;break;case 24:T.value="square",X=2;break;case 30:T.value="polygon",le.visible=!0,X=1;break}}),(z,C)=>{const w=oe("v-rect"),A=oe("v-layer"),J=oe("v-stage");return D(),re("div",{ref_key:"container",ref:Be,tabindex:"1",class:"w-full h-full relative container",onKeydown:Me,onKeyup:Le,onContextmenu:he,onMousedown:He,onMouseup:Re},[P(Zt,{stateValue:q(T)},null,8,["stateValue"]),P(J,{config:q(me),onClick:Ye,onMousemove:ze},{default:j(()=>[P(A,{ref_key:"layer",ref:Ne},{default:j(()=>[P(ei),P(Z,ae(ne({...N})),null,16),P(lt,ae(ne({...K})),{default:j(()=>[P(Z,te({x:K.points[0],y:K.points[1]},{...k}),null,16,["x","y"]),P(Z,te({x:K.points[2],y:K.points[3]},{...k}),null,16,["x","y"])]),_:1},16),P(ot,ae(ne({...Q})),{default:j(()=>[(D(!0),re(ke,null,ge(Q.points,G=>(D(),se(Z,te({x:G[0],y:G[1]},{...k}),null,16,["x","y"]))),256))]),_:1},16),P(at,ae(ne({...V})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:V.inX-V.x,y:V.inY-V.y},{...k}),null,16,["x","y"])]),_:1},16),P(nt,ae(ne({...O})),{outter:j(()=>[P(Z,te({x:O.points[0],y:O.points[1]},{...k}),null,16,["x","y"]),P(Z,te({x:O.points[2],y:O.points[3]},{...k}),null,16,["x","y"]),P(Z,te({x:O.points[4],y:O.points[5]},{...k}),null,16,["x","y"])]),_:1},16),P(Te,ae(ne({...g})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:g.params[4],y:0},{...k}),null,16,["x"]),P(Z,te({x:-g.params[4],y:0},{...k}),null,16,["x"]),P(Z,te({x:0,y:g.params[5]},{...k}),null,16,["y"]),P(Z,te({x:0,y:-g.params[5]},{...k}),null,16,["y"])]),_:1},16),P(rt,ae(ne({...x})),{inner:j(()=>[P(Z,te({x:x.params[0],y:0},{...k}),null,16,["x"]),P(Z,te({x:-x.params[0],y:0},{...k}),null,16,["x"])]),default:j(()=>[P(Z,te({x:x.x,y:x.y},{...k}),null,16,["x","y"]),P(Z,te({x:x.inX,y:x.inY},{...k}),null,16,["x","y"])]),_:1},16),P(De,ae(ne({...r})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:r.params[4],y:0},{...k}),null,16,["x"]),P(Z,te({x:-r.params[4],y:0},{...k}),null,16,["x"]),P(Z,te({x:0,y:r.params[5]},{...k}),null,16,["y"]),P(Z,te({x:0,y:-r.params[5]},{...k}),null,16,["y"])]),_:1},16),P(ct,ae(ne({...a})),{inner:j(()=>[P(Z,te({x:a.params[0],y:0},{...k}),null,16,["x"]),P(Z,te({x:-a.params[0],y:0},{...k}),null,16,["x"])]),default:j(()=>[P(Z,te({x:a.x,y:a.y},{...k}),null,16,["x","y"]),P(Z,te({x:a.inX,y:a.inY},{...k}),null,16,["x","y"])]),_:1},16),P(ut,ae(ne({...v})),{outter:j(()=>[P(Z,te({x:v.points[0],y:v.points[1]},{...k}),null,16,["x","y"]),P(Z,te({x:v.points[2],y:v.points[3]},{...k}),null,16,["x","y"]),P(Z,te({x:v.points[4],y:v.points[5]},{...k}),null,16,["x","y"])]),_:1},16),P(ht,ae(ne({...E})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:0,y:E.p/2},{...k}),null,16,["y"])]),_:1},16),P(dt,ae(ne({...y})),{default:j(()=>[P(Z,te({x:y.points[0],y:y.points[1]},{...k}),null,16,["x","y"]),P(Z,te({x:y.points[2],y:y.points[3]},{...k}),null,16,["x","y"]),P(Z,te({x:y.points[4],y:y.points[5]},{...k}),null,16,["x","y"])]),_:1},16),P(ft,ae(ne({...$})),{default:j(()=>[P(Z,te({x:$.points[0],y:$.points[1]},{...k}),null,16,["x","y"]),P(Z,te({x:$.points[2],y:$.points[3]},{...k}),null,16,["x","y"]),P(Z,te({x:$.points[4],y:$.points[5]},{...k}),null,16,["x","y"]),P(Z,te({x:$.points[6],y:$.points[7]},{...k}),null,16,["x","y"])]),_:1},16),P(pt,ae(ne({...m})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:m.params[4],y:0},{...k}),null,16,["x"]),P(Z,te({x:0,y:m.params[5]},{...k}),null,16,["y"]),P(Z,te({x:m.params[4],y:m.params[5]},{...k}),null,16,["x","y"])]),_:1},16),P(bt,ae(ne({...R})),{default:j(()=>[P(Z,te({x:0,y:0},{...k}),null,16),P(Z,te({x:R.params[1],y:0},{...k}),null,16,["x"]),P(Z,te({x:0,y:R.params[1]},{...k}),null,16,["y"]),P(Z,te({x:R.params[1],y:R.params[1]},{...k}),null,16,["x","y"])]),_:1},16),P(vt,ae(ne({...le})),{default:j(()=>[(D(!0),re(ke,null,ge(le.points,G=>(D(),se(Z,te({x:G[0],y:G[1]},{...k}),null,16,["x","y"]))),256))]),_:1},16),P(w,te({ref_key:"selected",ref:qe},{...o}),null,16)]),_:1},512)]),_:1},8,["config"])],544)}}}),ii=Ve(ti,[["__scopeId","data-v-2f00dbbd"]]),si=ue({__name:"Content",setup(M){const i=fe();function e(){i.global.isRight=!0}let c=$e(0),n=$e(0);function S(k){for(const N of k)n.value=N.contentRect.width,c.value=N.contentRect.height}const o=$e();return it(()=>{new ResizeObserver(S).observe(o.value)}),(k,N)=>{const Q=oe("font-awesome-icon"),K=Qe("tooltip");return D(),re("div",{ref_key:"contentContainer",ref:o,class:"h-full w-full relative"},[P(ii,{width:q(n),height:q(c)},null,8,["width","height"]),Ie((D(),se(q(be),{text:"",size:"small",class:"m-1 hover:bg-green-100 text-base absolute right-0 top-0",onClick:e},{icon:j(()=>[P(Q,{icon:["fas","wrench"]})]),_:1})),[[K,"",void 0,{left:!0}],[st,!q(i).global.isRight]])],512)}}}),oi={class:"h-full w-full flex justify-content-between"},li=ue({__name:"LeftSideBarHeader",setup(M){return fe(),(i,e)=>{const c=oe("font-awesome-icon"),n=Qe("tooltip");return D(),re("div",oi,[Ie((D(),se(q(be),{text:"",size:"small",class:"m-1 hover:bg-green-100 text-base"},{icon:j(()=>[P(c,{icon:["fas","plus"]})]),_:1})),[[n,"",void 0,{right:!0}]])])}}}),ai={class:"w-full h-full border-top-1 border-200"},ni={class:"m-3 flex flex-wrap gap-3"},ri=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("line",{x1:"20",y1:"20",x2:"35",y2:"35",stroke:"black","stroke-width":"4"}),B("path",{d:"M10,10 L20,20 L30,20 z",fill:"black","stroke-width":"0"}),B("path",{d:"M10,10 L20,20 L20,30 z",fill:"black","stroke-width":"0"})],-1),ci=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("circle",{cx:"22.5",cy:"22.5",r:"4",fill:"black","stroke-width":"0"})],-1),ui=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("line",{x1:"10",y1:"35",x2:"35",y2:"10",stroke:"black","stroke-width":"2"})],-1),hi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"22.5",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("line",{x1:"10",y1:"35",x2:"22.5",y2:"10",stroke:"black","stroke-width":"2"}),B("line",{x1:"22.5",y1:"10",x2:"35",y2:"35",stroke:"black","stroke-width":"2"})],-1),di=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("circle",{cx:"22.5",cy:"22.5",r:"18",fill:"transparent",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"})],-1),fi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("circle",{cx:"22.5",cy:"22.5",r:"18",fill:"transparent",stroke:"black","stroke-width":"2"}),B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"})],-1),pi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("ellipse",{cx:"22.5",cy:"22.5",rx:"18",ry:"10",fill:"transparent",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"40.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"22.5",cy:"12.5",r:"3",fill:"black","stroke-width":"0"})],-1),bi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("ellipse",{cx:"22.5",cy:"22.5",rx:"18",ry:"10",fill:"transparent",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"32",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"12.5",cy:"14.5",r:"3",fill:"black","stroke-width":"0"})],-1),vi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M5,5 Q22.5,22.5 5,40",fill:"none",stroke:"black","stroke-width":"2"}),B("path",{d:"M40,5 Q22.5,22.5 40,40",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"31.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"22.5",cy:"12.5",r:"3",fill:"black","stroke-width":"0"})],-1),ki=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M5,5 Q22.5,22.5 5,40",fill:"none",stroke:"black","stroke-width":"2"}),B("path",{d:"M40,5 Q22.5,22.5 40,40",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"38",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"11",cy:"12.5",r:"3",fill:"black","stroke-width":"0"})],-1),gi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M5,5 Q22.5,70 40,5",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"7.5",cy:"12.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"16",cy:"32",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"34",cy:"22.5",r:"3",fill:"black","stroke-width":"0"})],-1),xi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M5,5 Q22.5,70 40,5",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"22.5",cy:"37",r:"3",fill:"black","stroke-width":"0"})],-1),yi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M10,35 Q22.5,10 35,35",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"22.5",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"})],-1),mi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M10,35 C10,10 35,10 35,35",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"10",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"})],-1),Mi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("rect",{x:"5",y:"10",width:"35",height:"25",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"5",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"40",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"40",cy:"35",r:"3",fill:"black","stroke-width":"0"})],-1),wi=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("rect",{x:"10",y:"10",width:"25",height:"25",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"10",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"10",r:"3",fill:"black","stroke-width":"0"})],-1),_i=B("svg",{width:"45",height:"45",viewBox:"0 0 45 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[B("path",{d:"M22.5,10 L10,22.5 L10,35 L35,35 L35,22.5 z",fill:"none",stroke:"black","stroke-width":"2"}),B("circle",{cx:"22.5",cy:"10",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"10",cy:"22.5",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"10",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"35",r:"3",fill:"black","stroke-width":"0"}),B("circle",{cx:"35",cy:"22.5",r:"3",fill:"black","stroke-width":"0"})],-1),Wi=ue({__name:"LeftSideBarContent",setup(M){const i=fe();return pe(()=>i.global.state,()=>{i.global.state}),(e,c)=>(D(),re("div",ai,[B("div",ni,[P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===0}]),onClick:c[0]||(c[0]=n=>q(i).global.state=0)},{default:j(()=>[ri]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===1||q(i).global.state===2}]),onClick:c[1]||(c[1]=n=>q(i).global.state=1)},{default:j(()=>[ci]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===3||q(i).global.state===5}]),onClick:c[2]||(c[2]=n=>q(i).global.state=3)},{default:j(()=>[ui]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===4}]),onClick:c[3]||(c[3]=n=>q(i).global.state=4)},{default:j(()=>[hi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===6||q(i).global.state===7}]),onClick:c[4]||(c[4]=n=>q(i).global.state=6)},{default:j(()=>[di]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===8||q(i).global.state===9}]),onClick:c[5]||(c[5]=n=>q(i).global.state=8)},{default:j(()=>[fi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===10||q(i).global.state===12}]),onClick:c[6]||(c[6]=n=>q(i).global.state=10)},{default:j(()=>[pi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===11||q(i).global.state===13}]),onClick:c[7]||(c[7]=n=>q(i).global.state=11)},{default:j(()=>[bi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===18||q(i).global.state===20}]),onClick:c[8]||(c[8]=n=>q(i).global.state=18)},{default:j(()=>[vi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===19||q(i).global.state===21}]),onClick:c[9]||(c[9]=n=>q(i).global.state=19)},{default:j(()=>[ki]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===14||q(i).global.state===16}]),onClick:c[10]||(c[10]=n=>q(i).global.state=14)},{default:j(()=>[gi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===15||q(i).global.state===17}]),onClick:c[11]||(c[11]=n=>q(i).global.state=15)},{default:j(()=>[xi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===26||q(i).global.state===27}]),onClick:c[12]||(c[12]=n=>q(i).global.state=26)},{default:j(()=>[yi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===28||q(i).global.state===29}]),onClick:c[13]||(c[13]=n=>q(i).global.state=28)},{default:j(()=>[mi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===22||q(i).global.state===23}]),onClick:c[14]||(c[14]=n=>q(i).global.state=22)},{default:j(()=>[Mi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===24||q(i).global.state===25}]),onClick:c[15]||(c[15]=n=>q(i).global.state=24)},{default:j(()=>[wi]),_:1},8,["class"]),P(q(be),{outlined:"",class:ye(["p-0",{"bg-cyan-100":q(i).global.state===30}]),onClick:c[16]||(c[16]=n=>q(i).global.state=30)},{default:j(()=>[_i]),_:1},8,["class"])])]))}}),Ci={class:"h-full w-full flex flex-column border-right-2 border-200"},Pi=ue({__name:"LeftSideBar",setup(M){return(i,e)=>(D(),re("div",Ci,[P(li,{class:"h-3rem"}),P(Wi,{class:"flex-1"})]))}}),Si={class:"h-full w-full flex justify-content-between"},Xi=ue({__name:"RightSideBarHeader",setup(M){const i=fe();function e(){i.global.isRight=!1}return(c,n)=>{const S=oe("font-awesome-icon"),o=Qe("tooltip");return D(),re("div",Si,[Ie((D(),se(q(be),{text:"",size:"small",class:"m-1 hover:bg-green-100 text-base",onClick:e},{icon:j(()=>[P(S,{icon:["fas","angles-right"]})]),_:1})),[[o,"",void 0,{right:!0}]])])}}}),Yi={},Ei={class:"h-full w-full"};function $i(M,i){return D(),re("div",Ei)}const Li=Ve(Yi,[["render",$i]]),qi={class:"h-full w-full flex flex-column"},Ni=ue({__name:"RightSideBar",setup(M){return(i,e)=>(D(),re("div",qi,[P(Xi,{class:"h-3rem"}),P(Li,{class:"flex-1"})]))}}),Bi={class:"h-full w-full flex"},zi=ue({__name:"Geometry",setup(M){const i=fe(),e=jt(()=>100-(i.global.isRight?15:0));return(c,n)=>(D(),re("div",Bi,[P(Pi,{class:"h-full w-10rem"}),P(q(Kt),{class:"flex-1 border-none"},{default:j(()=>[P(q(tt),{size:e.value,minSize:25},{default:j(()=>[P(si)]),_:1},8,["size"]),Ie(P(q(tt),{size:15,minSize:15},{default:j(()=>[P(Ni)]),_:1},512),[[st,q(i).global.isRight]])]),_:1})]))}});export{zi as default};
