(function(){"use strict";function Ht(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ot={exports:{}};ot.exports=q,ot.exports.default=q;function q(t,e,n){n=n||2;var o=e&&e.length,s=o?e[0]*n:t.length,a=mt(t,0,s,n,!0),r=[];if(!a||a.next===a.prev)return r;var x,h,f,i,M,u,m;if(o&&(a=Rt(t,e,a,n)),t.length>80*n){x=f=t[0],h=i=t[1];for(var y=n;y<s;y+=n)M=t[y],u=t[y+1],M<x&&(x=M),u<h&&(h=u),M>f&&(f=M),u>i&&(i=u);m=Math.max(f-x,i-h),m=m!==0?32767/m:0}return Y(a,r,n,x,h,m,0),r}function mt(t,e,n,o,s){var a,r;if(s===xt(t,e,n,o)>0)for(a=e;a<n;a+=o)r=pt(a,t[a],t[a+1],r);else for(a=n-o;a>=e;a-=o)r=pt(a,t[a],t[a+1],r);return r&&tt(r,r.next)&&(K(r),r=r.next),r}function J(t,e){if(!t)return t;e||(e=t);var n=t,o;do if(o=!1,!n.steiner&&(tt(n,n.next)||A(n.prev,n,n.next)===0)){if(K(n),n=e=n.prev,n===n.next)break;o=!0}else n=n.next;while(o||n!==e);return e}function Y(t,e,n,o,s,a,r){if(t){!r&&a&&$t(t,o,s,a);for(var x=t,h,f;t.prev!==t.next;){if(h=t.prev,f=t.next,a?Ct(t,o,s,a):St(t)){e.push(h.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),K(t),t=f.next,x=f.next;continue}if(t=f,t===x){r?r===1?(t=Xt(J(t),e,n),Y(t,e,n,o,s,a,2)):r===2&&Jt(t,e,n,o,s,a):Y(J(t),e,n,o,s,a,1);break}}}}function St(t){var e=t.prev,n=t,o=t.next;if(A(e,n,o)>=0)return!1;for(var s=e.x,a=n.x,r=o.x,x=e.y,h=n.y,f=o.y,i=s<a?s<r?s:r:a<r?a:r,M=x<h?x<f?x:f:h<f?h:f,u=s>a?s>r?s:r:a>r?a:r,m=x>h?x>f?x:f:h>f?h:f,y=o.next;y!==e;){if(y.x>=i&&y.x<=u&&y.y>=M&&y.y<=m&&R(s,x,a,h,r,f,y.x,y.y)&&A(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Ct(t,e,n,o){var s=t.prev,a=t,r=t.next;if(A(s,a,r)>=0)return!1;for(var x=s.x,h=a.x,f=r.x,i=s.y,M=a.y,u=r.y,m=x<h?x<f?x:f:h<f?h:f,y=i<M?i<u?i:u:M<u?M:u,d=x>h?x>f?x:f:h>f?h:f,b=i>M?i>u?i:u:M>u?M:u,O=st(m,y,e,n,o),S=st(d,b,e,n,o),p=t.prevZ,w=t.nextZ;p&&p.z>=O&&w&&w.z<=S;){if(p.x>=m&&p.x<=d&&p.y>=y&&p.y<=b&&p!==s&&p!==r&&R(x,i,h,M,f,u,p.x,p.y)&&A(p.prev,p,p.next)>=0||(p=p.prevZ,w.x>=m&&w.x<=d&&w.y>=y&&w.y<=b&&w!==s&&w!==r&&R(x,i,h,M,f,u,w.x,w.y)&&A(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;p&&p.z>=O;){if(p.x>=m&&p.x<=d&&p.y>=y&&p.y<=b&&p!==s&&p!==r&&R(x,i,h,M,f,u,p.x,p.y)&&A(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;w&&w.z<=S;){if(w.x>=m&&w.x<=d&&w.y>=y&&w.y<=b&&w!==s&&w!==r&&R(x,i,h,M,f,u,w.x,w.y)&&A(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Xt(t,e,n){var o=t;do{var s=o.prev,a=o.next.next;!tt(s,a)&&wt(s,o,o.next,a)&&B(s,a)&&B(a,s)&&(e.push(s.i/n|0),e.push(o.i/n|0),e.push(a.i/n|0),K(o),K(o.next),o=t=a),o=o.next}while(o!==t);return J(o)}function Jt(t,e,n,o,s,a){var r=t;do{for(var x=r.next.next;x!==r.prev;){if(r.i!==x.i&&Qt(r,x)){var h=dt(r,x);r=J(r,r.next),h=J(h,h.next),Y(r,e,n,o,s,a,0),Y(h,e,n,o,s,a,0);return}x=x.next}r=r.next}while(r!==t)}function Rt(t,e,n,o){var s=[],a,r,x,h,f;for(a=0,r=e.length;a<r;a++)x=e[a]*o,h=a<r-1?e[a+1]*o:t.length,f=mt(t,x,h,o,!1),f===f.next&&(f.steiner=!0),s.push(Lt(f));for(s.sort(Yt),a=0;a<s.length;a++)n=Bt(s[a],n);return n}function Yt(t,e){return t.x-e.x}function Bt(t,e){var n=Kt(t,e);if(!n)return e;var o=dt(n,t);return J(o,o.next),J(n,n.next)}function Kt(t,e){var n=e,o=t.x,s=t.y,a=-1/0,r;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var x=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(x<=o&&x>a&&(a=x,r=n.x<n.next.x?n:n.next,x===o))return r}n=n.next}while(n!==e);if(!r)return null;var h=r,f=r.x,i=r.y,M=1/0,u;n=r;do o>=n.x&&n.x>=f&&o!==n.x&&R(s<i?o:a,s,f,i,s<i?a:o,s,n.x,n.y)&&(u=Math.abs(s-n.y)/(o-n.x),B(n,t)&&(u<M||u===M&&(n.x>r.x||n.x===r.x&&_t(r,n)))&&(r=n,M=u)),n=n.next;while(n!==h);return r}function _t(t,e){return A(t.prev,t,e.prev)<0&&A(e.next,t,t.next)<0}function $t(t,e,n,o){var s=t;do s.z===0&&(s.z=st(s.x,s.y,e,n,o)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,Gt(s)}function Gt(t){var e,n,o,s,a,r,x,h,f=1;do{for(n=t,t=null,a=null,r=0;n;){for(r++,o=n,x=0,e=0;e<f&&(x++,o=o.nextZ,!!o);e++);for(h=f;x>0||h>0&&o;)x!==0&&(h===0||!o||n.z<=o.z)?(s=n,n=n.nextZ,x--):(s=o,o=o.nextZ,h--),a?a.nextZ=s:t=s,s.prevZ=a,a=s;n=o}a.nextZ=null,f*=2}while(r>1);return t}function st(t,e,n,o,s){return t=(t-n)*s|0,e=(e-o)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Lt(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function R(t,e,n,o,s,a,r,x){return(s-r)*(e-x)>=(t-r)*(a-x)&&(t-r)*(o-x)>=(n-r)*(e-x)&&(n-r)*(a-x)>=(s-r)*(o-x)}function Qt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Ut(t,e)&&(B(t,e)&&B(e,t)&&Wt(t,e)&&(A(t.prev,t,e.prev)||A(t,e.prev,e))||tt(t,e)&&A(t.prev,t,t.next)>0&&A(e.prev,e,e.next)>0)}function A(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function tt(t,e){return t.x===e.x&&t.y===e.y}function wt(t,e,n,o){var s=et(A(t,e,n)),a=et(A(t,e,o)),r=et(A(n,o,t)),x=et(A(n,o,e));return!!(s!==a&&r!==x||s===0&&nt(t,n,e)||a===0&&nt(t,o,e)||r===0&&nt(n,t,o)||x===0&&nt(n,e,o))}function nt(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function et(t){return t>0?1:t<0?-1:0}function Ut(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&wt(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function B(t,e){return A(t.prev,t,t.next)<0?A(t,e,t.next)>=0&&A(t,t.prev,e)>=0:A(t,e,t.prev)<0||A(t,t.next,e)<0}function Wt(t,e){var n=t,o=!1,s=(t.x+e.x)/2,a=(t.y+e.y)/2;do n.y>a!=n.next.y>a&&n.next.y!==n.y&&s<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next;while(n!==t);return o}function dt(t,e){var n=new at(t.i,t.x,t.y),o=new at(e.i,e.x,e.y),s=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,o.next=n,n.prev=o,a.next=o,o.prev=a,o}function pt(t,e,n,o){var s=new at(t,e,n);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function K(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function at(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}q.deviation=function(t,e,n,o){var s=e&&e.length,a=s?e[0]*n:t.length,r=Math.abs(xt(t,0,a,n));if(s)for(var x=0,h=e.length;x<h;x++){var f=e[x]*n,i=x<h-1?e[x+1]*n:t.length;r-=Math.abs(xt(t,f,i,n))}var M=0;for(x=0;x<o.length;x+=3){var u=o[x]*n,m=o[x+1]*n,y=o[x+2]*n;M+=Math.abs((t[u]-t[y])*(t[m+1]-t[u+1])-(t[u]-t[m])*(t[y+1]-t[u+1]))}return r===0&&M===0?0:Math.abs((M-r)/r)};function xt(t,e,n,o){for(var s=0,a=e,r=n-o;a<n;a+=o)s+=(t[r]-t[a])*(t[a+1]+t[r+1]),r=a;return s}q.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},o=0,s=0;s<t.length;s++){for(var a=0;a<t[s].length;a++)for(var r=0;r<e;r++)n.vertices.push(t[s][a][r]);s>0&&(o+=t[s-1].length,n.holes.push(o))}return n};var Dt=ot.exports,Vt=Ht(Dt);function bt(t,e){for(let n=0;n!==e.length;++n)if(t.length===e[n].length){let o=!0;for(let s=0;s!==e[n].length;++s)t[s]!==e[n][s]&&(o=!1);if(o)return!0}return!1}function qt(t,e,n){const o=[],s=[],a=[];t.forEach(x=>{e.forEach(h=>{Math.abs(x.x-h.x)<3&&n.forEach(f=>{Math.abs(x.y-f.y)<3&&Math.abs(h.y-f.x)<3&&a.push({x:h.y,y:x.x,z:x.y})})})}),t.forEach(x=>{n.forEach(h=>{Math.abs(x.y-h.y)<3&&e.forEach(f=>{Math.abs(x.x-f.x)<3&&Math.abs(h.x-f.y)<3&&s.push({x:h.x,y:x.x,z:x.y})})})}),e.forEach(x=>{n.forEach(h=>{Math.abs(x.y-h.x)<3&&t.forEach(f=>{Math.abs(x.x-f.x)<3&&Math.abs(h.y-f.y)<3&&o.push({x:h.x,y:x.x,z:h.y})})})});const r=[];return a.forEach(x=>{r.findIndex(f=>Math.abs(f.x-x.x)<3&&Math.abs(f.y-x.y)<3&&Math.abs(f.z-x.z)<3)===-1&&r.push(x)}),s.forEach(x=>{r.findIndex(f=>Math.abs(f.x-x.x)<3&&Math.abs(f.y-x.y)<3&&Math.abs(f.z-x.z)<3)===-1&&r.push(x)}),o.forEach(x=>{r.findIndex(f=>Math.abs(f.x-x.x)<3&&Math.abs(f.y-x.y)<3&&Math.abs(f.z-x.z)<3)===-1&&r.push(x)}),r}function ht(t,e,n=!0){if(Math.sqrt(Math.pow(t.y2-t.y1,2)+Math.pow(t.x2-t.x1,2))<3)return n;let s=Math.atan2(t.y2-t.y1,t.x2-t.x1);s<0&&(s+=Math.PI),s>=Math.PI&&(s-=Math.PI);const a=t.y2-t.y1,r=t.x1-t.x2,x=t.x2*t.y1-t.x1*t.y2,h=Math.sqrt(Math.pow(t.y2-t.y1,2)+Math.pow(t.x2-t.x1,2));for(const f of e){let i=Math.atan2(f.points[3]-f.points[1],f.points[2]-f.points[0]);if(i<0&&(i+=Math.PI),i>=Math.PI&&(i-=Math.PI),Math.abs(s-i)<.05&&Math.abs(a*f.points[0]+r*f.points[1]+x)/h<3)return!0}return!1}function tn(t,e,n,o){const s=[];for(let a=0;a<o.length;++a)for(let r=a+1;r<o.length;++r){const x={x1:o[a].y,y1:o[a].z,x2:o[r].y,y2:o[r].z},h={x1:o[a].y,y1:o[a].x,x2:o[r].y,y2:o[r].x},f={x1:o[a].x,y1:o[a].z,x2:o[r].x,y2:o[r].z};ht(x,t)&&ht(h,e)&&ht(f,n)&&s.push([a,r])}return s}function nn(t){return(t.points[3]-t.points[1])*t.points[0]+(t.points[0]-t.points[2])*t.points[1]}function en(t,e,n,o){const s=t.points[0],a=t.points[1],r=t.points[2],x=t.points[3],h=e.points[0],f=e.points[1],i=e.points[2],M=e.points[3],u=1/((r-s)*(M-f)-(i-h)*(x-a)),m=o*(r-s)-n*(i-h),y=o*(x-a)-n*(M-f);return{x:m*u,y:y*u}}function rn(t,e,n){if(!isFinite(n.x)||!isFinite(n.y))return!1;const o=Math.max(t.points[0],t.points[2])+1,s=Math.min(t.points[0],t.points[2])-1,a=Math.max(t.points[1],t.points[3])+1,r=Math.min(t.points[1],t.points[3])-1,x=Math.max(e.points[0],e.points[2])+1,h=Math.min(e.points[0],e.points[2])-1,f=Math.max(e.points[1],e.points[3])+1,i=Math.min(e.points[1],e.points[3])-1;return!(n.x<s||n.x>o||n.x<h||n.x>x||n.y<r||n.y>a||n.y<i||n.y>f)}function _(t,e,n){let o=Math.atan2(e.y-t.y,e.x-t.x);if(o<0&&(o+=Math.PI),o>=Math.PI&&(o-=Math.PI),Math.abs(o-n[0])<.01){const s=n[1],a=n[2],r=n[3];if(Math.abs(s*t.x+a*t.y+r)/Math.sqrt(s*s+a*a)<3)return!0}return!1}function ft(t,e){const n=[],o=[...t,...e],s=o.map(a=>nn(a));for(let a=0;a<o.length;++a)for(let r=a+1;r<o.length;++r){const x=en(o[a],o[r],s[a],s[r]);rn(o[a],o[r],x)&&n.findIndex(f=>Math.abs(f.x-x.x)<3&&Math.abs(f.y-x.y)<3)===-1&&n.push(x)}return n}function ct(t,e,n){const o=[...t,...e],s=o.map(r=>{let x=Math.atan2(r.points[3]-r.points[1],r.points[2]-r.points[0]);x<0&&(x+=Math.PI),x>=Math.PI&&(x-=Math.PI);const h=r.points[3]-r.points[1],f=r.points[0]-r.points[2],i=r.points[2]*r.points[1]-r.points[0]*r.points[3];return[x,h,f,i]}),a=[];for(let r=0;r<n.length;++r)for(let x=r+1;x<n.length;++x)for(let h=0;h<o.length;++h)_(n[r],n[x],s[h])&&a.push([[r,x],s[h]]);return on(a,n)}function on(t,e){const n=new Set;for(let s=0;s<t.length;++s)for(let a=s+1;a<t.length;++a)if(_(e[t[s][0][0]],e[t[s][0][1]],t[a][1])){const r=e[t[s][0][0]],x=e[t[s][0][1]],h=e[t[a][0][0]],f=e[t[a][0][1]],i=Math.min(r.x,x.x),M=Math.max(r.x,x.x),u=Math.min(r.y,x.y),m=Math.max(r.y,x.y),y=Math.min(h.x,f.x),d=Math.max(h.x,f.x),b=Math.min(h.y,f.y),O=Math.max(h.y,f.y);i-3<y&&M+3>d&&u-3<b&&m+3>O&&n.add(s),y-3<i&&d+3>M&&b-3<u&&O+3>m&&n.add(a)}const o=Array.from(n);return o.sort((s,a)=>a-s),o.forEach(s=>{t.splice(s,1)}),t}function sn(t){const e=[];for(let n=0;n<t.length;++n)t[n]===1&&e.push(n);return e}function an(t,e,n){let o=Math.atan2(e.z-t.z,e.y-t.y),s=Math.atan2(e.x-t.x,e.z-t.z),a=Math.atan2(e.y-t.y,e.x-t.x),r=Math.atan2(n.z-e.z,n.y-e.y),x=Math.atan2(n.x-e.x,n.z-e.z),h=Math.atan2(n.y-e.y,n.x-e.x);return o<0&&(o+=Math.PI),s<0&&(s+=Math.PI),a<0&&(a+=Math.PI),r<0&&(r+=Math.PI),x<0&&(x+=Math.PI),h<0&&(h+=Math.PI),o>=Math.PI&&(o-=Math.PI),s>=Math.PI&&(s-=Math.PI),a>=Math.PI&&(a-=Math.PI),r>=Math.PI&&(r-=Math.PI),x>=Math.PI&&(x-=Math.PI),h>=Math.PI&&(h-=Math.PI),Math.abs(o-r)<.01&&Math.abs(s-x)<.01&&Math.abs(a-h)<.01}function xn(t,e,n,o){for(let s=0;s!==o.length;++s)if(o[s].includes(t)&&o[s].includes(e)&&o[s].includes(n))return!0;return!1}function hn(t,e,n,o){const s=(e.y-t.y)*(n.z-t.z)-(e.z-t.z)*(n.y-t.y),a=(e.z-t.z)*(n.x-t.x)-(e.x-t.x)*(n.z-t.z),r=(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x),x=-(s*t.x+a*t.y+r*t.z),h=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)+Math.pow(r,2)),f=[];let i=0;return o.forEach(M=>{Math.abs(s*M.x+a*M.y+r*M.z+x)/h<3&&f.push(i),i++}),[f,[s,a,r,x,h]]}function fn(t,e,n,o){const s=Math.abs(e.x-t.x)<3?0:e.x-t.x,a=Math.abs(e.y-t.y)<3?0:e.y-t.y,r=Math.abs(e.z-t.z)<3?0:e.z-t.z,x=Math.abs(o.x-n.x)<3?0:o.x-n.x,h=Math.abs(o.y-n.y)<3?0:o.y-n.y,f=Math.abs(o.z-n.z)<3?0:o.z-n.z;let i=Math.atan2(r,a),M=Math.atan2(s,r),u=Math.atan2(a,s),m=Math.atan2(f,h),y=Math.atan2(x,f),d=Math.atan2(h,x);if(i<0&&(i+=Math.PI),M<0&&(M+=Math.PI),u<0&&(u+=Math.PI),m<0&&(m+=Math.PI),y<0&&(y+=Math.PI),d<0&&(d+=Math.PI),i>=Math.PI&&(i-=Math.PI),M>=Math.PI&&(M-=Math.PI),u>=Math.PI&&(u-=Math.PI),m>=Math.PI&&(m-=Math.PI),y>=Math.PI&&(y-=Math.PI),d>=Math.PI&&(d-=Math.PI),Math.abs(i-m)<.01&&Math.abs(M-y)<.01&&Math.abs(u-d)<.01){const b=[e.x-t.x,e.y-t.y,e.z-t.z],O=[n.x-t.x,n.y-t.y,n.z-t.z],S=[b[1]*O[2]-b[2]*O[1],b[2]*O[0]-b[0]*O[2],b[0]*O[1]-b[1]*O[0]];if(Math.sqrt(Math.pow(S[0],2)+Math.pow(S[1],2)+Math.pow(S[2],2))/Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2))<5)return!0}return!1}function cn(t,e){const n=[],o=new Array(t.length).fill(!1);return Et(t,e,e,o,[],n),n}function Et(t,e,n,o,s,a){o[n]=!0,s.push(n);for(let r=0;r<t.length;r++)if(t[n][r]===1)if(o[r]){const x=s.indexOf(r);if(x!==-1){const h=s.slice(x);h.length>2&&h[0]===e&&a.push(h)}}else Et(t,e,r,o,s,a);s.pop(),o[n]=!1}function ut(t,e){const n=[],o=[];for(let s=0;s!==t.length;++s){let a=0,r=0;const x=[];e.forEach(h=>{const f=h[0].findIndex(i=>i===t[s][0]);f!==-1&&(h[0][(f-1+h[0].length)%h[0].length]===t[s][1]||h[0][(f+1)%h[0].length]===t[s][1])&&(a++,x.push(r)),r++}),n.push(a),o.push(x)}return{num:n,arr:o}}function Ft(t,e){for(;;){const n=ut(t,e);let o=!1;const s=[],a=[];for(let r=0;r!==n.num.length;++r)n.num[r]===1?(s.push(r),a.push(n.arr[r][0]),o=!0):n.num[r]===0&&(s.push(r),o=!0);if(s.sort((r,x)=>x-r),a.sort((r,x)=>x-r),s.forEach(r=>{t.splice(r,1)}),a.forEach(r=>{e.splice(r,1)}),!o)return n}}function un(t,e,n,o){const s=Array.from({length:o[0].length},()=>0),a=Array.from({length:o[1].length},()=>0),r=Array.from({length:o[2].length},()=>0);return e.forEach(x=>{for(let h=0;h<x[0].length;++h){const f=x[0][h],i=x[0][(h+1)%x[0].length],M=t.findIndex(u=>f===u[0]&&i===u[1]||f===u[1]&&i===u[0]);M!==-1&&(n[0][M].forEach(u=>{const m=o[0].findIndex(y=>u[0]===y[0][0]&&u[1]===y[0][1]||u[1]===y[0][0]&&u[0]===y[0][1]);m!==-1&&s[m]++}),n[1][M].forEach(u=>{const m=o[1].findIndex(y=>u[0]===y[0][0]&&u[1]===y[0][1]||u[1]===y[0][0]&&u[0]===y[0][1]);m!==-1&&a[m]++}),n[2][M].forEach(u=>{const m=o[2].findIndex(y=>u[0]===y[0][0]&&u[1]===y[0][1]||u[1]===y[0][0]&&u[0]===y[0][1]);m!==-1&&r[m]++}))}}),[s,a,r]}function Mn(t,e,n,o){const s=un(t,e,n,o);let a=!0;return s.forEach(r=>{r.forEach(x=>{x===0&&(a=!1)})}),a}const $=[];function Zt(t,e,n,o){const s=ut(t,e);let a=-1,r=[];for(let x=0;x!==s.num.length;++x)if(s.num[x]>2){a=x,r=s.arr[x];break}if(a===-1)return $.push([t,e]),{isOK:!0,data:[t,e]};for(let x=0;x!==r.length;++x)for(let h=x+1;h!==r.length;++h){const f=Array.from(e),i=Array.from(t);for(let M=0;M!==r.length;++M)M!==x&&M!==h&&f.splice(r[M],1);ut(i,f),Ft(i,f),Mn(i,f,n,o)&&Zt(i,f,n,o)}return{isOK:!1,data:[t,e]}}function yn(t,e,n,o,s,a,r,x,h){const f=ft(o,r),i=ft(a,h),M=ft(s,x),u=ct(o,r,f),m=ct(a,h,i),y=ct(s,x,M),d=qt(f,i,M),b=tn([...o,...r],[...a,...h],[...s,...x],d),O=new Set;for(let c=0;c<b.length;++c)for(let v=c+1;v<b.length;++v){const I=d[b[c][0]],g=d[b[c][1]],z=d[b[v][0]],l=d[b[v][1]];if(fn(I,g,z,l)){const F=Math.min(I.x,g.x),E=Math.max(I.x,g.x),Z=Math.min(I.y,g.y),P=Math.max(I.y,g.y),j=Math.min(I.z,g.z),H=Math.max(I.z,g.z),N=Math.min(z.x,l.x),G=Math.max(z.x,l.x),T=Math.min(z.y,l.y),k=Math.max(z.y,l.y),C=Math.min(z.z,l.z),X=Math.max(z.z,l.z);F-3<N&&E+3>G&&Z-3<T&&P+3>k&&j-3<C&&H+3>X&&O.add(c),N-3<F&&G+3>E&&T-3<Z&&k+3>P&&C-3<j&&X+3>H&&O.add(v)}}const S=Array.from(O);S.sort((c,v)=>v-c),S.forEach(c=>{b.splice(c,1)});const p=d.length,w=Array.from({length:p},()=>Array.from({length:p},()=>0));b.forEach(c=>{w[c[0]][c[1]]=1,w[c[1]][c[0]]=1});const At=[],it=[],Pt=[];for(let c=0;c<d.length;++c){const v=sn(w[c]);for(let I=0;I<v.length;++I)for(let g=I+1;g<v.length&&!xn(v[I],c,v[g],At);++g)if(At.push([v[I],c,v[g]]),!an(d[v[I]],d[c],d[v[g]])){const z=hn(d[v[I]],d[c],d[v[g]],d);!bt(z[0],it)&&z[0].length>2&&(it.push(z[0]),Pt.push(z[1]))}}const Mt=[];it.forEach(c=>{const v=[];for(let I=0;I<w.length;++I)for(let g=I+1;g<w[I].length;++g)w[I][g]&&c.includes(I)&&c.includes(g)&&v.push([I,g]);Mt.push(v)});const Nt=[];for(let c=0;c!==Mt.length;++c){const v=Mt[c],I=d.length,g=Array.from({length:I},()=>Array.from({length:I},()=>0));v.forEach(l=>{g[l[0]][l[1]]=1,g[l[1]][l[0]]=1});const z=[...Pt[c]];for(;;){let l=-1,F=I+1,E=0;if(g.forEach(Z=>{let P=0;Z.forEach(j=>{P+=j}),P<F&&P!==0&&(F=P,l=E),E++}),l!==-1){if(F>1){const Z=cn(g,l);let P=-1,j=1/0;for(let H=0;H!==Z.length;++H)Z[H].length<j&&(j=Z[H].length,P=H);P!==-1&&Nt.push([Z[P],z])}for(let Z=0;Z!==g[l].length;++Z)g[l][Z]=0,g[Z][l]=0}else break}}const rt=[],Tt=[];Nt.forEach(c=>{const v=[...c[0]];v.sort((I,g)=>I-g),bt(v,Tt)||(Tt.push(v),rt.push(c))});const yt=[],lt=[],vt=[];b.forEach(c=>{const v=d[c[0]],I=d[c[1]],g={x:v.y,y:v.z},z={x:I.y,y:I.z},l={x:v.y,y:v.x},F={x:I.y,y:I.x},E={x:v.x,y:v.z},Z={x:I.x,y:I.z},P=[],j=[],H=[];u.forEach(N=>{if(Math.sqrt(Math.pow(g.x-z.x,2)+Math.pow(g.y-z.y,2))>3&&_(g,z,N[1])){const T=f[N[0][0]],k=f[N[0][1]],C=Math.min(g.x,z.x)-3,X=Math.max(g.x,z.x)+3,L=Math.min(g.y,z.y)-3,Q=Math.max(g.y,z.y)+3,U=Math.min(T.x,k.x),W=Math.max(T.x,k.x),D=Math.min(T.y,k.y),V=Math.max(T.y,k.y);C<U&&X>W&&L<D&&Q>V&&P.push(N[0])}}),m.forEach(N=>{if(Math.sqrt(Math.pow(l.x-F.x,2)+Math.pow(l.y-F.y,2))>3&&_(l,F,N[1])){const T=i[N[0][0]],k=i[N[0][1]],C=Math.min(l.x,F.x)-3,X=Math.max(l.x,F.x)+3,L=Math.min(l.y,F.y)-3,Q=Math.max(l.y,F.y)+3,U=Math.min(T.x,k.x),W=Math.max(T.x,k.x),D=Math.min(T.y,k.y),V=Math.max(T.y,k.y);C<U&&X>W&&L<D&&Q>V&&j.push(N[0])}}),y.forEach(N=>{if(Math.sqrt(Math.pow(E.x-Z.x,2)+Math.pow(E.y-Z.y,2))>3&&_(E,Z,N[1])){const T=M[N[0][0]],k=M[N[0][1]],C=Math.min(E.x,Z.x)-3,X=Math.max(E.x,Z.x)+3,L=Math.min(E.y,Z.y)-3,Q=Math.max(E.y,Z.y)+3,U=Math.min(T.x,k.x),W=Math.max(T.x,k.x),D=Math.min(T.y,k.y),V=Math.max(T.y,k.y);C<U&&X>W&&L<D&&Q>V&&H.push(N[0])}}),yt.push(P),lt.push(j),vt.push(H)});const ln=Array.from({length:u.length},()=>0),vn=Array.from({length:m.length},()=>0),gn=Array.from({length:y.length},()=>0);rt.forEach(c=>{for(let v=0;v<c[0].length;++v){const I=c[0][v],g=c[0][(v+1)%c[0].length],z=b.findIndex(l=>I===l[0]&&g===l[1]||I===l[1]&&g===l[0]);z!==-1&&(yt[z].forEach(l=>{const F=u.findIndex(E=>l[0]===E[0][0]&&l[1]===E[0][1]||l[1]===E[0][0]&&l[0]===E[0][1]);F!==-1&&ln[F]++}),lt[z].forEach(l=>{const F=m.findIndex(E=>l[0]===E[0][0]&&l[1]===E[0][1]||l[1]===E[0][0]&&l[0]===E[0][1]);F!==-1&&vn[F]++}),vt[z].forEach(l=>{const F=y.findIndex(E=>l[0]===E[0][0]&&l[1]===E[0][1]||l[1]===E[0][0]&&l[0]===E[0][1]);F!==-1&&gn[F]++}))}});const In=[yt,lt,vt],zn=[u,m,y];$.splice(0,$.length),Ft(b,rt),Zt(b,rt,In,zn),console.log($);let kt=[],Ot=1/0;$.forEach(c=>{const v=c[1].length;v<Ot&&(Ot=v,kt=c[1])});const gt=[],It=[],zt=[];d.forEach(c=>{const v=gt.findIndex(z=>Math.abs(z-c.x)<3),I=It.findIndex(z=>Math.abs(z-c.y)<3),g=zt.findIndex(z=>Math.abs(z-c.z)<3);v===-1&&gt.push(Number(c.x.toFixed(0))),I===-1&&It.push(Number(c.y.toFixed(0))),g===-1&&zt.push(Number(c.z.toFixed(0)))}),d.forEach(c=>{const v=gt.find(z=>Math.abs(z-c.x)<3),I=It.find(z=>Math.abs(z-c.y)<3),g=zt.find(z=>Math.abs(z-c.z)<3);v!==void 0&&(c.x=v),I!==void 0&&(c.y=I),g!==void 0&&(c.z=g)});const jt=[];return kt.forEach(c=>{const v=Math.pow(c[1][1],2)+Math.pow(c[1][2],2),I=Math.pow(c[1][0],2)+Math.pow(c[1][2],2),g=Math.pow(c[1][0],2)+Math.pow(c[1][1],2),z=Math.min(Math.min(v,I),g);let l=0,F=0;z===v?(l=1,F=2):z===I?(l=0,F=2):z===g&&(l=0,F=1);const E=[];c[0].forEach(P=>{const j=d[P],H=[j.x,j.y,j.z];E.push(H[l],H[F])});const Z=Vt(E);for(let P=0;P<Z.length;P+=3)jt.push([c[0][Z[P]],c[0][Z[P+1]],c[0][Z[P+2]]])}),[d,b,jt]}self.onmessage=function(t){if(t.data.length>=9){const e=JSON.parse(t.data),n=yn(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);postMessage(JSON.stringify(n))}else postMessage(JSON.stringify([]))}})();
