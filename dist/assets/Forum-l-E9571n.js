import{a as k,X as w,Y as P,k as n,w as $,l as C,W as i,o as r,c as p,y as a,F as L,j as y,g as _,u,e as N,f as g,Z as b,$ as B,t as l}from"./index-n6R6eWql.js";import{s as F}from"./fieldset.esm-eP25ExgE.js";import{s as R}from"./paginator.esm-0yz6-6Rm.js";const j={class:"w-full h-full overflow-y-scroll surface-50 flex justify-content-center"},J={style:{width:"75%"},class:"bg-white"},M={class:"flex align-items-center px-2"},O={class:"font-bold ml-3"},S={class:"flex flex-column"},A={class:"mt-0"},U={class:"m-0"},V={class:"flex justify-content-between align-items-end"},D={class:"text-400 text-sm"},X=k({__name:"Forum",setup(E){w();const d=P();n(-1),n(""),n("");const f=n(0),o=n(0),c=n([]);function h(t){d.push({path:`/article/${t}`})}function m(t){d.push({path:`/user/${t}`})}function v(){i.get(`/api/get_all_article?page=${o.value}`).then(function(t){if(t.data.success){const s=JSON.parse(t.data.data);c.value=s.records}})}return $(()=>o,()=>{v()}),C(()=>{i.get("/api/get_num_all_article?page=-1").then(function(t){t.data.success&&(f.value=Math.ceil(Number(t.data.data)/10))}),i.get(`/api/get_all_article?page=${o.value}`).then(function(t){if(t.data.success){const s=JSON.parse(t.data.data);console.log(s),c.value=s}})}),(t,s)=>(r(),p("div",j,[a("div",J,[(r(!0),p(L,null,y(c.value,e=>(r(),N(u(F),{class:"prevent-select mx-4 mt-3",onClick:x=>h(e.id)},{legend:g(()=>[a("div",M,[_(u(B),{image:e.avatar,shape:"circle",onClick:b(x=>m(e.userid),["stop"])},null,8,["image","onClick"]),a("span",O,l(e.username),1)])]),default:g(()=>[a("div",S,[a("h2",A,l(e.title),1),a("p",U,l(e.content),1),a("div",V,[a("p",D,l(e.time),1)])])]),_:2},1032,["onClick"]))),256)),_(u(R),{first:o.value,"onUpdate:first":s[0]||(s[0]=e=>o.value=e),rows:1,totalRecords:f.value,template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink JumpToPageInput"},null,8,["first","totalRecords"])])]))}});export{X as default};
